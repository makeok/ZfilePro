import{cM as He,a9 as Ve,c as ie,r as we,S as Ie,a as B,f as R,O as de,P as Se,l as se,u as E,n as Oe,g as Le,D as Ae,E as xe,y as ve,A as ge}from"./index.a81894c3.js";import{c as qe}from"./common.d1611fb2.js";import{m as Ge}from"./file.511d1578.js";import{a as Ue,p as Ke}from"./useFileRepeat.09ef18bd.js";import{_ as je}from"./plugin-vue_export-helper.21dcd24c.js";import"./base.9447ff7a.js";/* empty css                */import"./tooltip.afcd3f9d.js";import"./popper.34e4046d.js";import"./request.88c6336a.js";import"./focus-trap.c21bbfc6.js";import"./SvgIcon.bb4e9d6f.js";import"./vue3-clipboard.esm-bundler.0bd39b9d.js";/* empty css             */import"./dialog.8e75b1b4.js";import"./index.1d04ede7.js";import"./scroll.c1d55f52.js";import"./overlay.e553b113.js";import"./event.807e9a54.js";import"./refs.7263a917.js";/* empty css               */import"./checkbox.adc9a1be.js";import"./index.3b295ed4.js";import"./_Uint8Array.25475a91.js";import"./image-viewer.adc9414e.js";import"./debounce.ff28d2f1.js";import"./index.9dce3cd8.js";import"./castArray.7c80ce00.js";import"./switch.0dde4485.js";import"./validator.4f1297a1.js";import"./use-outside-click.86ba09c6.js";import"./directive.8a34351b.js";import"./form-item.c881aa55.js";import"./index.b1a3ab43.js";import"./_initCloneObject.df1878fc.js";/* empty css              */import"./table.7b0ce08e.js";import"./scrollbar.b58c5e8b.js";/* empty css                     */import"./tag.be7f307a.js";import"./useCommon.373cb8ed.js";import"./index.9b197a07.js";import"./select.06aace55.js";import"./unit.5ed4b9cd.js";import"./card.da6ac894.js";import"./alert.73507778.js";import"./route-block.89f12ae7.js";import"./index.9f034646.js";import"./XCircleIcon.609d2c30.js";var Je={exports:{}};(function(ne){(function(g,h){var u=h(g,g.document,Date);g.lazySizes=u,ne.exports&&(ne.exports=u)})(typeof window!="undefined"?window:{},function(h,u,D){var M,r;if(function(){var a,t={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",fastLoadedClass:"ls-is-cached",iframeLoadMode:0,srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};r=h.lazySizesConfig||h.lazysizesConfig||{};for(a in t)a in r||(r[a]=t[a])}(),!u||!u.getElementsByClassName)return{init:function(){},cfg:r,noSupport:!0};var H=u.documentElement,oe=h.HTMLPictureElement,F="addEventListener",C="getAttribute",c=h[F].bind(h),m=h.setTimeout,G=h.requestAnimationFrame||m,T=h.requestIdleCallback,y=/^picture$/i,ee=["load","error","lazyincluded","_lazyloaded"],A={},j=Array.prototype.forEach,w=function(a,t){return A[t]||(A[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")),A[t].test(a[C]("class")||"")&&A[t]},I=function(a,t){w(a,t)||a.setAttribute("class",(a[C]("class")||"").trim()+" "+t)},le=function(a,t){var s;(s=w(a,t))&&a.setAttribute("class",(a[C]("class")||"").replace(s," "))},fe=function(a,t,s){var v=s?F:"removeEventListener";s&&fe(a,t),ee.forEach(function(d){a[v](d,t)})},J=function(a,t,s,v,d){var n=u.createEvent("Event");return s||(s={}),s.instance=M,n.initEvent(t,!v,!d),n.detail=s,a.dispatchEvent(n),n},ue=function(a,t){var s;!oe&&(s=h.picturefill||r.pf)?(t&&t.src&&!a[C]("srcset")&&a.setAttribute("srcset",t.src),s({reevaluate:!0,elements:[a]})):t&&t.src&&(a.src=t.src)},Q=function(a,t){return(getComputedStyle(a,null)||{})[t]},pe=function(a,t,s){for(s=s||a.offsetWidth;s<r.minSize&&t&&!a._lazysizesWidth;)s=t.offsetWidth,t=t.parentNode;return s},X=function(){var a,t,s=[],v=[],d=s,n=function(){var o=d;for(d=s.length?v:s,a=!0,t=!1;o.length;)o.shift()();a=!1},p=function(o,f){a&&!f?o.apply(this,arguments):(d.push(o),t||(t=!0,(u.hidden?m:G)(n)))};return p._lsFlush=n,p}(),te=function(a,t){return t?function(){X(a)}:function(){var s=this,v=arguments;X(function(){a.apply(s,v)})}},Me=function(a){var t,s=0,v=r.throttleDelay,d=r.ricTimeout,n=function(){t=!1,s=D.now(),a()},p=T&&d>49?function(){T(n,{timeout:d}),d!==r.ricTimeout&&(d=r.ricTimeout)}:te(function(){m(n)},!0);return function(o){var f;(o=o===!0)&&(d=33),!t&&(t=!0,f=v-(D.now()-s),f<0&&(f=0),o||f<9?p():m(p,f))}},me=function(a){var t,s,v=99,d=function(){t=null,a()},n=function(){var p=D.now()-s;p<v?m(n,v-p):(T||d)(d)};return function(){s=D.now(),t||(t=m(n,v))}},ye=function(){var a,t,s,v,d,n,p,o,f,S,N,O,Fe=/^img$/i,ke=/^iframe$/i,Ne="onscroll"in h&&!/(gle|ing)bot/.test(navigator.userAgent),Be=0,Y=0,k=0,U=-1,ze=function(e){k--,(!e||k<0||!e.target)&&(k=0)},he=function(e){return O==null&&(O=Q(u.body,"visibility")=="hidden"),O||!(Q(e.parentNode,"visibility")=="hidden"&&Q(e,"visibility")=="hidden")},Re=function(e,i){var l,z=e,_=he(e);for(o-=i,N+=i,f-=i,S+=i;_&&(z=z.offsetParent)&&z!=u.body&&z!=H;)_=(Q(z,"opacity")||1)>0,_&&Q(z,"overflow")!="visible"&&(l=z.getBoundingClientRect(),_=S>l.left&&f<l.right&&N>l.top-1&&o<l.bottom+1);return _},Ce=function(){var e,i,l,z,_,b,P,W,V,$,q,K,x=M.elements;if((v=r.loadMode)&&k<8&&(e=x.length)){for(i=0,U++;i<e;i++)if(!(!x[i]||x[i]._lazyRace)){if(!Ne||M.prematureUnveil&&M.prematureUnveil(x[i])){Z(x[i]);continue}if((!(W=x[i][C]("data-expand"))||!(b=W*1))&&(b=Y),$||($=!r.expand||r.expand<1?H.clientHeight>500&&H.clientWidth>500?500:370:r.expand,M._defEx=$,q=$*r.expFactor,K=r.hFac,O=null,Y<q&&k<1&&U>2&&v>2&&!u.hidden?(Y=q,U=0):v>1&&U>1&&k<6?Y=$:Y=Be),V!==b&&(n=innerWidth+b*K,p=innerHeight+b,P=b*-1,V=b),l=x[i].getBoundingClientRect(),(N=l.bottom)>=P&&(o=l.top)<=p&&(S=l.right)>=P*K&&(f=l.left)<=n&&(N||S||f||o)&&(r.loadHidden||he(x[i]))&&(t&&k<3&&!W&&(v<3||U<4)||Re(x[i],b))){if(Z(x[i]),_=!0,k>9)break}else!_&&t&&!z&&k<4&&U<4&&v>2&&(a[0]||r.preloadAfterLoad)&&(a[0]||!W&&(N||S||f||o||x[i][C](r.sizesAttr)!="auto"))&&(z=a[0]||x[i])}z&&!_&&Z(z)}},L=Me(Ce),_e=function(e){var i=e.target;if(i._lazyCache){delete i._lazyCache;return}ze(e),I(i,r.loadedClass),le(i,r.loadingClass),fe(i,be),J(i,"lazyloaded")},Te=te(_e),be=function(e){Te({target:e.target})},Pe=function(e,i){var l=e.getAttribute("data-load-mode")||r.iframeLoadMode;l==0?e.contentWindow.location.replace(i):l==1&&(e.src=i)},We=function(e){var i,l=e[C](r.srcsetAttr);(i=r.customMedia[e[C]("data-media")||e[C]("media")])&&e.setAttribute("media",i),l&&e.setAttribute("srcset",l)},$e=te(function(e,i,l,z,_){var b,P,W,V,$,q;($=J(e,"lazybeforeunveil",i)).defaultPrevented||(z&&(l?I(e,r.autosizesClass):e.setAttribute("sizes",z)),P=e[C](r.srcsetAttr),b=e[C](r.srcAttr),_&&(W=e.parentNode,V=W&&y.test(W.nodeName||"")),q=i.firesLoad||"src"in e&&(P||b||V),$={target:e},I(e,r.loadingClass),q&&(clearTimeout(s),s=m(ze,2500),fe(e,be,!0)),V&&j.call(W.getElementsByTagName("source"),We),P?e.setAttribute("srcset",P):b&&!V&&(ke.test(e.nodeName)?Pe(e,b):e.src=b),_&&(P||V)&&ue(e,{src:b})),e._lazyRace&&delete e._lazyRace,le(e,r.lazyClass),X(function(){var K=e.complete&&e.naturalWidth>1;(!q||K)&&(K&&I(e,r.fastLoadedClass),_e($),e._lazyCache=!0,m(function(){"_lazyCache"in e&&delete e._lazyCache},9)),e.loading=="lazy"&&k--},!0)}),Z=function(e){if(!e._lazyRace){var i,l=Fe.test(e.nodeName),z=l&&(e[C](r.sizesAttr)||e[C]("sizes")),_=z=="auto";(_||!t)&&l&&(e[C]("src")||e.srcset)&&!e.complete&&!w(e,r.errorClass)&&w(e,r.lazyClass)||(i=J(e,"lazyunveilread").detail,_&&ce.updateElem(e,!0,e.offsetWidth),e._lazyRace=!0,k++,$e(e,i,_,z,l))}},De=me(function(){r.loadMode=3,L()}),Ee=function(){r.loadMode==3&&(r.loadMode=2),De()},re=function(){if(!t){if(D.now()-d<999){m(re,999);return}t=!0,r.loadMode=3,L(),c("scroll",Ee,!0)}};return{_:function(){d=D.now(),M.elements=u.getElementsByClassName(r.lazyClass),a=u.getElementsByClassName(r.lazyClass+" "+r.preloadClass),c("scroll",L,!0),c("resize",L,!0),c("pageshow",function(e){if(e.persisted){var i=u.querySelectorAll("."+r.loadingClass);i.length&&i.forEach&&G(function(){i.forEach(function(l){l.complete&&Z(l)})})}}),h.MutationObserver?new MutationObserver(L).observe(H,{childList:!0,subtree:!0,attributes:!0}):(H[F]("DOMNodeInserted",L,!0),H[F]("DOMAttrModified",L,!0),setInterval(L,999)),c("hashchange",L,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(e){u[F](e,L,!0)}),/d$|^c/.test(u.readyState)?re():(c("load",re),u[F]("DOMContentLoaded",L),m(re,2e4)),M.elements.length?(Ce(),X._lsFlush()):L()},checkElems:L,unveil:Z,_aLSL:Ee}}(),ce=function(){var a,t=te(function(n,p,o,f){var S,N,O;if(n._lazysizesWidth=f,f+="px",n.setAttribute("sizes",f),y.test(p.nodeName||""))for(S=p.getElementsByTagName("source"),N=0,O=S.length;N<O;N++)S[N].setAttribute("sizes",f);o.detail.dataAttr||ue(n,o.detail)}),s=function(n,p,o){var f,S=n.parentNode;S&&(o=pe(n,S,o),f=J(n,"lazybeforesizes",{width:o,dataAttr:!!p}),f.defaultPrevented||(o=f.detail.width,o&&o!==n._lazysizesWidth&&t(n,S,f,o)))},v=function(){var n,p=a.length;if(p)for(n=0;n<p;n++)s(a[n])},d=me(v);return{_:function(){a=u.getElementsByClassName(r.autosizesClass),c("resize",d)},checkElems:d,updateElem:s}}(),ae=function(){!ae.i&&u.getElementsByClassName&&(ae.i=!0,ce._(),ye._())};return m(function(){r.init&&ae()}),M={cfg:r,autoSizer:ce,loader:ye,init:ae,uP:ue,aC:I,rC:le,hC:w,fire:J,gW:pe,rAF:X},M})})(Je);const Qe={class:"zfile-gallery-body"},Xe={key:0,class:"zfile-img-body"},Ye=["onClick"],Ze=["data-src","src","alt"],et={class:"zfile-gallery-img-text"},tt={class:"zfile-gallery-img-text"},at={key:1},rt={class:"zfile-gallery-img-text"},it={__name:"FileGallery",setup(ne){He(c=>({"6f27eb03":E(r),"4b773382":E(M),"3e07c068":E(D)}));let g=Ve(),h=Ue();const u=ie(()=>{let c=h.filterFileByType("image");if(c=c.filter(A=>!h.searchKey||A.name.toLowerCase().includes(h.searchKey.toLowerCase())),c.length===0)return[];let m=we([]),G=g.zfileConfig.gallery.column,T=0;c.forEach((A,j)=>{j%G===0&&(j!==0&&T++,m.value[T]=[]),m.value[T].push(A)});function y(A){return A[0].map((j,w)=>A.map(I=>I[w]))}return y(m.value)});let D=ie(()=>g.zfileConfig.gallery.rowSpacing+"px"),M=ie(()=>`0 ${g.zfileConfig.gallery.columnSpacing/2}px`),r=ie(()=>{let c=g.zfileConfig.gallery.column,m=g.zfileConfig.gallery.columnSpacing;return`calc(calc(100% / ${g.zfileConfig.gallery.column}) - calc(${(c-1)*m}px / ${c}))`});const{openImage:H}=Ke(),oe=c=>{!g.zfileConfig.imagePreview.gallery||F.includes(c.name)&&H(c)};let F=Ie([]);const C=c=>{F.push(c.currentTarget.alt)};return(c,m)=>(B(),R("div",Qe,[u.value.length>0?(B(),R("div",Xe,[(B(!0),R(de,null,Se(u.value,(G,T)=>(B(),R("div",{class:"zfile-img-row",key:T+"zfile-img-row"},[(B(!0),R(de,null,Se(G,(y,ee)=>(B(),R("div",{class:"zfile-img-col",onClick:A=>oe(y),key:ee+"zfile-img-col",style:Oe({display:E(g).zfileConfig.gallery.showInfoMode==="hover"?"flex":"block"})},[y!=null&&y.url?(B(),R(de,{key:0},[(B(),R("img",{class:Le(["zfile-gallery-img lazyload",E(g).zfileConfig.gallery.roundedBorder?"zfile-gallery-img-rounded":""]),"data-sizes":"auto",onLoad:C,"data-src":y.thumbnail,src:y.thumbnail,key:E(Ge)(y.url),loading:"lazy",alt:y.name},null,42,Ze)),E(g).zfileConfig.gallery.showInfo&&E(g).zfileConfig.gallery.showInfoMode==="hover"?Ae((B(),R("div",{key:0,class:Le([E(g).zfileConfig.gallery.roundedBorder?"zfile-gallery-img-rounded":"","zfile-gallery-img-hover-info"])},[ve("span",et,ge(y.name),1),ve("span",tt,ge(E(qe).fileSizeFormat(y.size)),1)],2)),[[xe,E(F).includes(y.name)]]):se("",!0),E(g).zfileConfig.gallery.showInfo&&E(g).zfileConfig.gallery.showInfoMode==="bottom"?Ae((B(),R("div",at,[ve("span",rt,ge(y.name),1)],512)),[[xe,E(F).includes(y.name)]]):se("",!0)],64)):se("",!0)],12,Ye))),128))]))),128))])):se("",!0)]))}};var ea=je(it,[["__scopeId","data-v-3362f362"]]);export{ea as default};
