!function(){var e=document.createElement("style");e.innerHTML=".expression-item[data-v-684516b5] .el-input__wrapper{width:100%}@media (min-width: 640px){.expression-item[data-v-684516b5] .el-input__wrapper{width:9rem}}@media (min-width: 768px){.expression-item[data-v-684516b5] .el-input__wrapper{width:12rem}}@media (min-width: 1024px){.expression-item[data-v-684516b5] .el-input__wrapper{width:16rem}}@media (min-width: 1280px){.expression-item[data-v-684516b5] .el-input__wrapper{width:20rem}}.zfile-admin-password-form[data-v-684516b5] .z-form-sub-title{max-width:100%}.zfile-admin-password-form .rules-tips[data-v-684516b5]{padding:.25rem;font-size:.875rem;line-height:1.25rem;font-weight:700}.zfile-admin-password-form .rules-tips-link[data-v-684516b5]{margin-top:.5rem}.zfile-admin-password-form .rules-tips-link[data-v-684516b5]>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1.25rem * var(--tw-space-x-reverse));margin-left:calc(1.25rem * calc(1 - var(--tw-space-x-reverse)))}.zfile-admin-password-form .rules-tips-link svg[data-v-684516b5]{height:1rem;line-height:1.25rem;vertical-align:text-bottom}\n",document.head.appendChild(e),System.register(["./base-legacy.ba5b7a3a.js","./loading-legacy.a92cda73.js","./button-legacy.96a0013c.js","./input-legacy.d4357d07.js","./tag-legacy.9310c6c1.js","./select-legacy.02e0f252.js","./scrollbar-legacy.c143c6a7.js","./popper-legacy.2c9263bf.js","./alert-legacy.cdb63236.js","./SvgIcon-legacy.040a47d9.js","./index-legacy.559a5434.js","./ZFormItem-legacy.eb663a6a.js","./admin-storage-legacy.ee536f65.js","./common-legacy.4e7090ed.js","./sortable.esm-legacy.a39a4582.js","./request-legacy.a1774e71.js","./index-legacy.7381ad7d.js","./admin-user-legacy.961c2973.js","./route-block-legacy.9534e494.js","./plugin-vue_export-helper-legacy.7bb61c33.js","./CheckBadgeIcon-legacy.21039039.js","./directive-legacy.1a2f693e.js","./index-legacy.dafda260.js","./event-legacy.d3c9bc11.js","./scroll-legacy.0e94e88d.js","./index-legacy.004982e8.js","./_Uint8Array-legacy.be503b59.js","./debounce-legacy.078b4aef.js","./validator-legacy.df5a4111.js","./focus-trap-legacy.a75696a1.js","./index-legacy.e449b062.js","./index-legacy.bd66d165.js"],(function(e){"use strict";var n,t,a,i,u,r,l,o,c,s,d,f,m,p,g,v,y,b,h,j,x,w,_,I,k,z,A,C,E,V,D,U,S,Z,q,B,L,T,F,H;return{setters:[function(e){n=e.x},function(){},function(){},function(){},function(){},function(e){t=e.E,a=e.a},function(){},function(){},function(e){i=e.E},function(e){u=e._},function(e){r=e.r,l=e.aa,o=e.ac,c=e.o,s=e.Z,d=e.D,f=e.u,m=e.a,p=e.b,g=e.e,v=e.y,y=e.j,b=e.A,h=e.z,j=e.f,x=e.O,w=e.P,_=e.a3,I=e.bg,k=e.af,z=e.ag},function(e){A=e.Z,C=e.a},function(e){E=e.g,V=e.h,D=e.i},function(e){U=e.u},function(e){S=e.S},function(e){Z=e.E},function(e){q=e.E},function(e){B=e.l},function(e){L=e.b},function(e){T=e._},function(e){F=e.r},function(e){H=e.v},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){var M=r([]),O=r(!1);function P(e,n){var t=n.params.storageId,a=function(){E(t).then((function(e){M.value=e.data,0===M.value.length&&u(),i()}))},i=function(){var e=document.querySelector(".z-form-body");S.create(e,{draggable:".expression-item",onEnd:function(e){if(e.oldIndex!==e.newIndex){var n=M.value.splice(e.oldIndex-1,1)[0];M.value.splice(e.newIndex-1,0,n)}}})},u=function(){M.value.push({userId:"",permission:"",storageId:t})};return{loading:O,loadAuthData:a,authList:M,addAuthItem:u,deleteAuthItem:function(e){M.value.splice(e,1)},saveAuthData:function(){for(var n=M.value.find((function(e){if(U.isEmpty(e.userId)||U.isEmpty(e.permission))return Z.warning("请检查数据填写是否完整"),!0})),i=0;i<M.value.length;i++){for(var u=0,r=M.value[i].userId,l=0;l<M.value.length;l++){M.value[l].userId==r&&u++}if(u>1)return Z.warning("同一用户不能出现多次"),!0}n||(O.value=!0,V(t,M.value).then((function(){q.confirm("保存成功, 是否返回存储源列表？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success",callback:function(n){"confirm"===n?e.push("/admin/storage-list"):a()}})})).finally((function(){O.value=!1})))}}}var G={class:"flex justify-items-center"},J=function(e){return k("data-v-684516b5"),e=e(),z(),e}((function(){return v("div",{class:"rules-tips"},"可以对存储源进行读和写授权，写包含读权限",-1)})),K={class:"sm:flex sm:space-x-2 sm:border-b-0 sm:pb-0 border-b pb-2"},N={__name:"[storageId]",setup:function(e){var k=l(),z=o(),E=k.params.storageId,V=P(z,k),U=V.loading,S=V.loadAuthData,Z=V.authList,q=V.addAuthItem,L=V.deleteAuthItem,T=V.saveAuthData,M=["读","写"],O=r();c((function(){S(),Q(),R()}));var N=r(),Q=function(){D(E).then((function(e){e.data.type=e.data.type.key,N.value=e.data}))},R=function(){B().then((function(e){O.value=e.data}))};return function(e,r){var l=u,o=s("router-link"),c=i,k=t,z=a,E=n,V=H;return d((m(),p(C,{model:f(Z),class:"zfile-admin-password-form"},{"form-title":g((function(){var e;return[v("div",G,[y(o,{to:"/admin/storage-list"},{default:g((function(){return[y(l,{class:"inline mr-2 cursor-pointer",name:"file-type-back"})]})),_:1}),v("span",null,"授权管理（"+b(null===(e=f(N))||void 0===e?void 0:e.name)+"）",1)])]})),"form-sub-title":g((function(){return[y(c,{closable:!1,type:"info"},{default:g((function(){return[J]})),_:1})]})),footer:g((function(){return[y(E,{type:"primary",size:"default",icon:f(F),onClick:f(T)},{default:g((function(){return[h("保存设置")]})),_:1},8,["icon","onClick"])]})),default:g((function(){return[(m(!0),j(x,null,w(f(Z),(function(e,n){return m(),p(A,{required:!0,key:e,class:"expression-item"},{default:g((function(){return[v("div",K,[y(z,{size:"default",modelValue:e.userId,"onUpdate:modelValue":function(n){return e.userId=n},placeholder:"请选择用户"},{default:g((function(){return[(m(!0),j(x,null,w(f(O),(function(e){return m(),p(k,{disabled:e.disabled,key:e.id,label:e.username+"("+e.usernameZh+")",value:e.id},null,8,["disabled","label","value"])})),128))]})),_:2},1032,["modelValue","onUpdate:modelValue"]),y(z,{size:"default",modelValue:e.permission,"onUpdate:modelValue":function(n){return e.permission=n},placeholder:"请选择权限"},{default:g((function(){return[(m(),j(x,null,w(M,(function(e){return y(k,{key:e,label:e,value:e},null,8,["label","value"])})),64))]})),_:2},1032,["modelValue","onUpdate:modelValue"]),y(E,{type:"danger",onClick:function(e){return f(L)(n)},icon:f(_)},null,8,["onClick","icon"])])]})),_:2},1024)})),128)),y(A,null,{default:g((function(){return[y(E,{type:"primary",size:"default",icon:f(I),onClick:f(q)},{default:g((function(){return[h("添加更多")]})),_:1},8,["icon","onClick"])]})),_:1})]})),_:1},8,["model"])),[[V,f(U)]])}}};"function"==typeof L&&L(N);e("default",T(N,[["__scopeId","data-v-684516b5"]]))}}}))}();
