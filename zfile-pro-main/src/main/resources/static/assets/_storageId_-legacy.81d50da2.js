!function(){var e=document.createElement("style");e.innerHTML=".expression-item[data-v-25f3b1b2] .el-input__wrapper{width:100%}@media (min-width: 640px){.expression-item[data-v-25f3b1b2] .el-input__wrapper{width:6rem}}@media (min-width: 768px){.expression-item[data-v-25f3b1b2] .el-input__wrapper{width:9rem}}@media (min-width: 1024px){.expression-item[data-v-25f3b1b2] .el-input__wrapper{width:12rem}}@media (min-width: 1280px){.expression-item[data-v-25f3b1b2] .el-input__wrapper{width:16rem}}.zfile-admin-readme-form[data-v-25f3b1b2] .z-form-sub-title{max-width:100%}.zfile-admin-readme-form .rules-tips[data-v-25f3b1b2]{padding:.25rem;font-size:.875rem;line-height:1.25rem;font-weight:700}.zfile-admin-readme-form .rules-tips-link[data-v-25f3b1b2]{margin-top:.5rem}.zfile-admin-readme-form .rules-tips-link[data-v-25f3b1b2]>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1.25rem * var(--tw-space-x-reverse));margin-left:calc(1.25rem * calc(1 - var(--tw-space-x-reverse)))}.zfile-admin-readme-form .rules-tips-link svg[data-v-25f3b1b2]{height:1rem;line-height:1.25rem;vertical-align:text-bottom}\n",document.head.appendChild(e),System.register(["./base-legacy.ba5b7a3a.js","./loading-legacy.a92cda73.js","./button-legacy.96a0013c.js","./input-legacy.d4357d07.js","./tag-legacy.9310c6c1.js","./select-legacy.02e0f252.js","./scrollbar-legacy.c143c6a7.js","./popper-legacy.2c9263bf.js","./alert-legacy.cdb63236.js","./tooltip-legacy.7c89f687.js","./switch-legacy.23086081.js","./SvgIcon-legacy.040a47d9.js","./index-legacy.559a5434.js","./ZFormItem-legacy.eb663a6a.js","./admin-storage-legacy.ee536f65.js","./common-legacy.4e7090ed.js","./sortable.esm-legacy.a39a4582.js","./request-legacy.a1774e71.js","./index-legacy.7381ad7d.js","./readme-editor-dialog-legacy.0d9e91fe.js","./route-block-legacy.9534e494.js","./plugin-vue_export-helper-legacy.7bb61c33.js","./CheckBadgeIcon-legacy.21039039.js","./FolderIcon-legacy.6bda3b14.js","./index-legacy.dafda260.js","./directive-legacy.1a2f693e.js","./event-legacy.d3c9bc11.js","./scroll-legacy.0e94e88d.js","./index-legacy.004982e8.js","./_Uint8Array-legacy.be503b59.js","./debounce-legacy.078b4aef.js","./validator-legacy.df5a4111.js","./focus-trap-legacy.a75696a1.js","./index-legacy.e449b062.js","./index-legacy.bd66d165.js","./dialog-legacy.b24d0286.js","./overlay-legacy.110f33bb.js","./refs-legacy.e7e7383f.js"],(function(e){"use strict";var n,t,a,i,l,o,r,c,u,d,s,f,m,p,b,g,v,y,x,h,j,w,_,k,V,I,z,E,U,C,R,T,D,M,S,q,B,L,Z,A,F,G,H,O,P,W,J,K,N,Q;return{setters:[function(e){n=e.x},function(){},function(){},function(){},function(){},function(e){t=e.E,a=e.a},function(){},function(e){i=e.E},function(e){l=e.E},function(){},function(e){o=e.E},function(e){r=e._},function(e){c=e.r,u=e.aa,d=e.ac,s=e.o,f=e.Z,m=e.D,p=e.u,b=e.a,g=e.b,v=e.e,y=e.y,x=e.j,h=e.A,j=e.ae,w=e.bu,_=e.z,k=e.f,V=e.O,I=e.P,z=e.bv,E=e.a1,U=e.a3,C=e.bg,R=e.l,T=e.af,D=e.ag},function(e){M=e.Z,S=e.a},function(e){q=e.r,B=e.t,L=e.i,Z=e.u},function(e){A=e.u},function(e){F=e.S},function(e){G=e.E},function(e){H=e.E},function(e){O=e.default},function(e){P=e.b},function(e){W=e._},function(e){J=e.r},function(e){K=e.r},function(e){N=e.E},function(e){Q=e.v},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){var X=c([]),Y=c(!1);function $(e,n){var t=n.params.storageId,a=function(){var e=document.querySelector(".z-form-body");F.create(e,{draggable:".expression-item",filter:".el-button, .editor-input",onEnd:function(e){if(e.oldIndex!==e.newIndex){var n=X.value.splice(e.oldIndex-1,1)[0];X.value.splice(e.newIndex-1,0,n)}}})},i=function(){X.value.push({description:"表达式 - "+(X.value.length+1),expression:"",readmeText:"",displayMode:"top",storageId:t})};return{loading:Y,loadReadmeData:function(){q(t).then((function(e){X.value=e.data,0===X.value.length&&i(),a()}))},readmeList:X,addReadmeItem:i,deleteReadmeItem:function(e){X.value.splice(e,1)},saveReadmeData:function(){if(!X.value.find((function(e){if(A.isEmpty(e.description)||A.isEmpty(e.expression)||A.isEmpty(e.readmeText))return G.warning("请检查数据填写是否完整"),!0}))){Y.value=!0;for(var n=0;n<X.value.length;n++){X.value[n].id=n+1}B(t,X.value).then((function(){H.confirm("保存成功, 是否返回存储源列表？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success",callback:function(n){"confirm"===n&&e.push("/admin/storage-list")}})})).finally((function(){Y.value=!1}))}}}}var ee=function(e){return T("data-v-25f3b1b2"),e=e(),D(),e},ne={class:"flex justify-between"},te=ee((function(){return y("span",{class:"mr-4 text-sm text-gray-500"},"兼容为读取 readme.md",-1)})),ae=ee((function(){return y("div",{class:"rules-tips"},"Glob 表达式规则：",-1)})),ie=ee((function(){return y("div",{class:"rules-tips"},[y("b",null,"/"),_(": 根目录, 如 "),y("span",{class:"code select-all"},"/"),_(" 表示根路径下会加载此文档显示.")],-1)})),le=ee((function(){return y("div",{class:"rules-tips"},[y("b",null,"*"),_("：单级路径通配符，如表达式 "),y("span",{class:"code select-all"},"/*"),_(" 表示根路径下的直接子文件夹会加载此文档显示.")],-1)})),oe=ee((function(){return y("div",{class:"rules-tips"},[y("b",null,"**"),_("：多级路径通配符，如表达式 "),y("span",{class:"code select-all"},"/music/**"),_(" 表示 /music 文件夹及以下所有文件夹都会加载此文档.")],-1)})),re=ee((function(){return y("div",{class:"rules-tips"},"注：系统匹配到第一个符合的规则就会取文档进行显示，所以请调整好规则顺序，下方规则可进行拖拽排序。",-1)})),ce={class:"rules-tips-link"},ue={target:"_blank",class:"link",href:"http://www.ruanyifeng.com/blog/2018/09/bash-wildcards.html"},de=ee((function(){return y("span",null,"参考文章 (Wikipedia)",-1)})),se={target:"_blank",class:"link",href:"http://www.ruanyifeng.com/blog/2018/09/bash-wildcards.html"},fe={target:"_blank",class:"link",href:"https://github.com/whinc/blog/issues/18"},me={class:"sm:flex sm:space-x-2 sm:border-b-0 sm:pb-0 border-b pb-2"},pe={__name:"[storageId]",setup:function(e){var T=u(),D=d(),q=T.params.storageId,B=$(D,T),A=B.loading,F=B.loadReadmeData,H=B.readmeList,P=B.addReadmeItem,W=B.deleteReadmeItem,X=B.saveReadmeData;s((function(){F(),ee()}));var Y=c(),ee=function(){L(q).then((function(e){e.data.type=e.data.type.key,Y.value=e.data}))},pe=c(!1);L(T.params.storageId).then((function(e){pe.value=e.data.compatibilityReadme||!1}));var be=function(){Z(T.params.storageId,pe.value).then((function(e){G.success("保存成功")}))},ge=c({}),ve=c(!1);return function(e,c){var u=r,d=f("router-link"),s=o,T=i,D=l,q=N,B=t,L=a,Z=n,F=Q;return m((b(),g(S,{model:p(H),class:"zfile-admin-readme-form"},{"form-title":v((function(){var e;return[y("div",ne,[y("div",null,[x(d,{to:"/admin/storage-list"},{default:v((function(){return[x(u,{class:"inline mr-2 cursor-pointer",name:"file-type-back"})]})),_:1}),y("span",null,"目录文档（"+h(null===(e=p(Y))||void 0===e?void 0:e.name)+"）",1)]),x(T,{placement:"top",content:"启用后下发的规则设置会失效，仅会为读取目录下的 readme.md 文件来渲染文档, 且固定在底部显示."},{default:v((function(){return[y("div",null,[te,x(s,{onChange:be,"active-text":"是","inline-prompt":"","inactive-text":"否",modelValue:p(pe),"onUpdate:modelValue":c[0]||(c[0]=function(e){return j(pe)?pe.value=e:pe=e})},null,8,["modelValue"])])]})),_:1})])]})),"form-sub-title":v((function(){return[x(D,{closable:!1,type:"info"},{default:v((function(){return[ae,ie,le,oe,re,y("div",ce,[y("a",ue,[x(p(w),{class:"inline mr-1"}),de]),y("a",se,[x(p(w),{class:"inline mr-1"}),_("参考文章 (阮一峰)")]),y("a",fe,[x(p(w),{class:"inline mr-1"}),_("参考文章 (Github)")])])]})),_:1})]})),footer:v((function(){return[x(Z,{type:"primary",size:"default",icon:p(J),onClick:p(X)},{default:v((function(){return[_("保存设置")]})),_:1},8,["icon","onClick"])]})),default:v((function(){return[(b(!0),k(V,null,I(p(H),(function(e,n){return b(),g(M,{required:!0,key:e,class:"expression-item"},{default:v((function(){return[y("div",me,[x(T,{content:"此处可填写表达书描述，用于辅助记忆，防止时间过长后不知道表达式含义.",placement:"top"},{default:v((function(){return[x(q,{"prefix-icon":p(z),placeholder:"请输入表达式描述",modelValue:e.description,"onUpdate:modelValue":function(n){return e.description=n}},null,8,["prefix-icon","modelValue","onUpdate:modelValue"])]})),_:2},1024),x(q,{"prefix-icon":p(K),placeholder:"请输入表达式",modelValue:e.expression,"onUpdate:modelValue":function(n){return e.expression=n},modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue","onUpdate:modelValue"]),x(q,{class:"editor-input",onClick:function(n){return t=e,ve.value=!0,void(ge.value=t);var t},readonly:"","prefix-icon":p(E),placeholder:"请点击编辑文档",modelValue:e.readmeText,"onUpdate:modelValue":function(n){return e.readmeText=n}},null,8,["onClick","prefix-icon","modelValue","onUpdate:modelValue"]),x(L,{class:"editor-input",modelValue:e.displayMode,"onUpdate:modelValue":function(n){return e.displayMode=n}},{default:v((function(){return[x(B,{label:"顶部显示",value:"top"}),x(B,{label:"底部显示",value:"bottom"}),x(B,{label:"弹窗显示",value:"dialog"})]})),_:2},1032,["modelValue","onUpdate:modelValue"]),x(Z,{type:"danger",onClick:function(e){return p(W)(n)},icon:p(U)},null,8,["onClick","icon"])])]})),_:2},1024)})),128)),x(M,null,{default:v((function(){return[x(Z,{type:"primary",size:"default",icon:p(C),onClick:p(P)},{default:v((function(){return[_("添加更多")]})),_:1},8,["icon","onClick"])]})),_:1}),p(ve)?(b(),g(O,{key:0,modelValue:p(ge).readmeText,"onUpdate:modelValue":c[1]||(c[1]=function(e){return p(ge).readmeText=e}),visible:p(ve),"onUpdate:visible":c[2]||(c[2]=function(e){return j(ve)?ve.value=e:ve=e})},null,8,["modelValue","visible"])):R("",!0)]})),_:1},8,["model"])),[[F,p(A)]])}}};"function"==typeof P&&P(pe);e("default",W(pe,[["__scopeId","data-v-25f3b1b2"]]))}}}))}();
