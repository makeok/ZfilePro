import{x as Z}from"./base.9447ff7a.js";/* empty css                *//* empty css               *//* empty css              */import"./tag.be7f307a.js";import{E as N,a as A}from"./select.06aace55.js";import"./scrollbar.b58c5e8b.js";import{E as G}from"./popper.34e4046d.js";import"./tooltip.afcd3f9d.js";import{E as O}from"./alert.73507778.js";import{_ as $}from"./SvgIcon.bb4e9d6f.js";import{r as F,aa as P,ac as W,o as H,Z as J,D as K,u as t,a as y,b as S,e as a,y as o,j as e,A as Q,bu as I,z as r,f as X,O as Y,P as ee,bv as te,a3 as oe,bg as ae,af as le,ag as se}from"./index.a81894c3.js";import{Z as B,a as re}from"./ZFormItem.85c758c5.js";import{n as ie,o as ne,i as ce}from"./admin-storage.576b99eb.js";import{u as de}from"./common.3ffdf4de.js";import{E as pe}from"./request.88c6336a.js";import{E as me}from"./index.9f034646.js";import{b as C}from"./route-block.89f12ae7.js";import{_ as ue}from"./plugin-vue_export-helper.21dcd24c.js";import{r as _e}from"./CheckBadgeIcon.5c38551d.js";import{r as fe}from"./FolderIcon.c78a493a.js";import{E as ge}from"./index.9dce3cd8.js";import{v as he}from"./directive.8a34351b.js";import"./event.807e9a54.js";import"./scroll.c1d55f52.js";import"./index.3b295ed4.js";import"./_Uint8Array.25475a91.js";import"./debounce.ff28d2f1.js";import"./validator.4f1297a1.js";import"./focus-trap.c21bbfc6.js";import"./index.b1a3ab43.js";import"./index.1d04ede7.js";let s=F([]),x=F(!1);function be(i,m){let d=m.params.storageId;const g=()=>{ie(d).then(n=>{s.value=n.data,s.value.length===0&&u()})},h=()=>{s.value.find(p=>{if(de.isEmpty(p.expression))return pe.warning("\u8BF7\u68C0\u67E5\u6570\u636E\u586B\u5199\u662F\u5426\u5B8C\u6574"),!0})||(x.value=!0,ne(d,s.value).then(()=>{me.confirm("\u4FDD\u5B58\u6210\u529F, \u662F\u5426\u8FD4\u56DE\u5B58\u50A8\u6E90\u5217\u8868\uFF1F","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"success",callback:p=>{p==="confirm"&&i.push("/admin/storage-list")}})}).finally(()=>{x.value=!1}))},u=()=>{s.value.push({mode:"hidden",expression:"",storageId:d,description:"\u8868\u8FBE\u5F0F - "+s.value.length})};return{loading:x,loadFilterData:g,filterList:s,addFilterItem:u,deleteFilterItem:n=>{s.value.splice(n,1)},saveFilterData:h}}const f=i=>(le("data-v-453f4e88"),i=i(),se(),i),ve={class:"flex justify-items-center"},ke=f(()=>o("div",{class:"rules-tips"},"Glob \u8868\u8FBE\u5F0F\u89C4\u5219\uFF1A",-1)),ye=f(()=>o("div",{class:"rules-tips"},[o("b",null,"*"),r("\uFF1A\u5355\u7EA7\u8DEF\u5F84\u901A\u914D\u7B26\uFF0C\u5982\u8868\u8FBE\u5F0F "),o("span",{class:"select-all code"},"/*.jpg"),r(" \u53EF\u4EE5\u5339\u914D\u6839\u8DEF\u5F84\u4E0B\u6240\u6709\u7684 jpg \u540E\u7F00\u7684\u6587\u4EF6")],-1)),Ie=f(()=>o("div",{class:"rules-tips"},[o("b",null,"**"),r("\uFF1A\u591A\u7EA7\u8DEF\u5F84\u901A\u914D\u7B26\uFF0C\u5982\u8868\u8FBE\u5F0F "),o("span",{class:"select-all code"},"/**.jpg"),r(" \u53EF\u4EE5\u5339\u914D\u6240\u6709\u8DEF\u5F84\u4E0B\u7684 jpg \u540E\u7F00\u7684\u6587\u4EF6")],-1)),xe={class:"rules-tips-link"},Fe={target:"_blank",class:"link",href:"http://www.ruanyifeng.com/blog/2018/09/bash-wildcards.html"},Ee=f(()=>o("span",null,"\u53C2\u8003\u6587\u7AE0 (Wikipedia)",-1)),Ve={target:"_blank",class:"link",href:"http://www.ruanyifeng.com/blog/2018/09/bash-wildcards.html"},we={target:"_blank",class:"link",href:"https://github.com/whinc/blog/issues/18"},Se={class:"sm:flex sm:space-x-2 sm:border-b-0 sm:pb-0 border-b pb-2"},D={__name:"[storageId]",setup(i){let m=P(),d=W(),g=m.params.storageId;const{loading:h,loadFilterData:u,filterList:b,addFilterItem:n,deleteFilterItem:p,saveFilterData:j}=be(d,m);H(()=>{u(),U()});const E=F(),U=()=>{ce(g).then(_=>{_.data.type=_.data.type.key,E.value=_.data})};return(_,Be)=>{const R=$,q=J("router-link"),z=O,V=ge,L=G,v=N,M=A,k=Z,T=he;return K((y(),S(re,{model:t(b),class:"zfile-admin-filter-form"},{"form-title":a(()=>{var l;return[o("div",ve,[e(q,{to:"/admin/storage-list"},{default:a(()=>[e(R,{class:"inline mr-2 cursor-pointer",name:"file-type-back"})]),_:1}),o("span",null,"\u8FC7\u6EE4\u6587\u4EF6\uFF08"+Q((l=t(E))==null?void 0:l.name)+"\uFF09",1)])]}),"form-sub-title":a(()=>[e(z,{closable:!1,type:"info"},{default:a(()=>[ke,ye,Ie,o("div",xe,[o("a",Fe,[e(t(I),{class:"inline mr-1"}),Ee]),o("a",Ve,[e(t(I),{class:"inline mr-1"}),r("\u53C2\u8003\u6587\u7AE0 (\u962E\u4E00\u5CF0)")]),o("a",we,[e(t(I),{class:"inline mr-1"}),r("\u53C2\u8003\u6587\u7AE0 (Github)")])])]),_:1})]),footer:a(()=>[e(k,{type:"primary",size:"default",icon:t(_e),onClick:t(j)},{default:a(()=>[r("\u4FDD\u5B58\u8BBE\u7F6E")]),_:1},8,["icon","onClick"])]),default:a(()=>[(y(!0),X(Y,null,ee(t(b),(l,w)=>(y(),S(B,{required:!0,key:w,class:"expression-item"},{default:a(()=>[o("div",Se,[e(L,{content:"\u6B64\u5904\u53EF\u586B\u5199\u8868\u8FBE\u4E66\u63CF\u8FF0\uFF0C\u7528\u4E8E\u8F85\u52A9\u8BB0\u5FC6\uFF0C\u9632\u6B62\u65F6\u95F4\u8FC7\u957F\u540E\u4E0D\u77E5\u9053\u8868\u8FBE\u5F0F\u542B\u4E49.",placement:"top"},{default:a(()=>[e(V,{"prefix-icon":t(te),placeholder:"\u8BF7\u8F93\u5165\u8868\u8FBE\u5F0F\u63CF\u8FF0",modelValue:l.description,"onUpdate:modelValue":c=>l.description=c},null,8,["prefix-icon","modelValue","onUpdate:modelValue"])]),_:2},1024),e(V,{"prefix-icon":t(fe),placeholder:"\u8BF7\u8F93\u5165\u8868\u8FBE\u5F0F",modelValue:l.expression,"onUpdate:modelValue":c=>l.expression=c,modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue","onUpdate:modelValue"]),e(M,{class:"editor-input",modelValue:l.mode,"onUpdate:modelValue":c=>l.mode=c},{default:a(()=>[e(v,{label:"\u4EC5\u9690\u85CF",value:"hidden"}),e(v,{label:"\u9690\u85CF\u5E76\u4E0D\u53EF\u8BBF\u95EE(\u9488\u5BF9\u76EE\u5F55)",value:"inaccessible"}),e(v,{label:"\u9690\u85CF\u5E76\u4E0D\u53EF\u8BBF\u95EE\u4E0D\u53EF\u4E0B\u8F7D(\u9488\u5BF9\u6587\u4EF6)",value:"disable_download"})]),_:2},1032,["modelValue","onUpdate:modelValue"]),e(k,{type:"danger",onClick:c=>t(p)(w),icon:t(oe)},null,8,["onClick","icon"])])]),_:2},1024))),128)),e(B,null,{default:a(()=>[e(k,{type:"primary",size:"default",icon:t(ae),onClick:t(n)},{default:a(()=>[r("\u6DFB\u52A0\u66F4\u591A")]),_:1},8,["icon","onClick"])]),_:1})]),_:1},8,["model"])),[[T,t(h)]])}}};typeof C=="function"&&C(D);var nt=ue(D,[["__scopeId","data-v-453f4e88"]]);export{nt as default};
