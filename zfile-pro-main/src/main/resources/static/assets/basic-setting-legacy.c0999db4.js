!function(){var e=document.createElement("style");e.innerHTML="",document.head.appendChild(e),System.register(["./base-legacy.ba5b7a3a.js","./loading-legacy.a92cda73.js","./ZFormItem-legacy.eb663a6a.js","./button-legacy.96a0013c.js","./input-number-legacy.2f507e7b.js","./input-legacy.d4357d07.js","./radio-legacy.c0dc2361.js","./tag-legacy.9310c6c1.js","./select-legacy.02e0f252.js","./scrollbar-legacy.c143c6a7.js","./popper-legacy.2c9263bf.js","./index-legacy.559a5434.js","./unit-legacy.203f0ef2.js","./switch-legacy.23086081.js","./useLinkSetting-legacy.417054dd.js","./admin-setting-legacy.05018def.js","./XCircleIcon-legacy.6d511707.js","./index-legacy.cbb92b2e.js","./index-legacy.dafda260.js","./directive-legacy.1a2f693e.js","./index-legacy.e449b062.js","./plugin-vue_export-helper-legacy.7bb61c33.js","./event-legacy.d3c9bc11.js","./index-legacy.7281359a.js","./request-legacy.a1774e71.js","./scroll-legacy.0e94e88d.js","./index-legacy.004982e8.js","./_Uint8Array-legacy.be503b59.js","./debounce-legacy.078b4aef.js","./validator-legacy.df5a4111.js","./focus-trap-legacy.a75696a1.js"],(function(e){"use strict";var l,n,t,u,a,o,r,i,c,d,f,s,p,m,v,b,g,y,h,V,x,w,k,_,j,P,C,T,U,L,I,E,z,R,Z;return{setters:[function(e){l=e.x},function(){},function(e){n=e.Z,t=e.a},function(){},function(e){u=e.E},function(){},function(e){a=e.E},function(){},function(e){o=e.E,r=e.a},function(){},function(){},function(e){i=e.a,c=e.f,d=e.y,f=e.r,s=e.w,p=e.O,m=e.P,v=e.j,b=e.u,g=e.e,y=e.b,h=e.D,V=e.E,x=e.A,w=e.z,k=e.l,_=e.ae},function(e){j=e.g,P=e.a},function(e){C=e.E},function(e){T=e.u},function(e){U=e.g,L=e.t},function(e){I=e.a,E=e.r},function(e){z=e.u},function(e){R=e.E},function(e){Z=e.v},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){function A(e,l){return i(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[d("path",{"fill-rule":"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v16.19l6.22-6.22a.75.75 0 1 1 1.06 1.06l-7.5 7.5a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 1 1 1.06-1.06l6.22 6.22V3a.75.75 0 0 1 .75-.75Z","clip-rule":"evenodd"})])}function D(e,l){return i(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[d("path",{"fill-rule":"evenodd",d:"M11.47 2.47a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 1 1-1.06 1.06l-6.22-6.22V21a.75.75 0 0 1-1.5 0V4.81l-6.22 6.22a.75.75 0 1 1-1.06-1.06l7.5-7.5Z","clip-rule":"evenodd"})])}function F(e,l){return i(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[d("path",{"fill-rule":"evenodd",d:"M4.25 12a.75.75 0 0 1 .75-.75h14a.75.75 0 0 1 0 1.5H5a.75.75 0 0 1-.75-.75Z","clip-rule":"evenodd"})])}function M(e,l){return i(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[d("path",{"fill-rule":"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z","clip-rule":"evenodd"})])}var S={class:"flex flex-wrap"},H={class:"flex items-center"},B=["onClick"],X=["onClick"],O=["onClick"],q=["onClick"],N={class:"ml-3 text-gray-500"},W={__name:"TimePicker",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup:function(e,l){var n=l.emit,t=e,a=f(t.modelValue?t.modelValue:[{value:"1",unit:"d",second:86400}]),w=n;s(a,(function(e){w("update:modelValue",e)}));return function(e,l){var n=u,t=o,f=r;return i(),c("div",S,[(i(!0),c(p,null,m(a.value,(function(e,l){return i(),c("div",{key:l,class:"mb-4 w-full"},[d("div",H,[v(n,{modelValue:e.value,"onUpdate:modelValue":function(l){return e.value=l},min:1,max:b(j)(e.unit),disabled:"forever"===e.unit},null,8,["modelValue","onUpdate:modelValue","max","disabled"]),v(f,{modelValue:e.unit,"onUpdate:modelValue":function(l){return e.unit=l},"fit-input-width":"",class:"ml-3 w-20"},{default:g((function(){return[(i(!0),c(p,null,m(b(P),(function(e){return i(),y(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:2},1032,["modelValue","onUpdate:modelValue"]),h(d("button",{type:"button",onClick:function(e){return function(e){if(0!==e){var l=a.value[e];a.value.splice(e,1),a.value.splice(e-1,0,l)}}(l)},class:"ml-2 py-2 px-2 rounded-md bg-blue-500 text-white hover:bg-blue-600 focus:bg-blue-700 focus:outline-none font-bold"},[v(b(D),{class:"h-4"})],8,B),[[V,0!==l]]),h(d("button",{type:"button",onClick:function(e){return function(e){if(e!==a.value.length-1){var l=a.value[e];a.value.splice(e,1),a.value.splice(e+1,0,l)}}(l)},class:"ml-2 py-2 px-2 rounded-md bg-blue-500 text-white hover:bg-blue-600 focus:bg-blue-700 focus:outline-none font-bold"},[v(b(A),{class:"h-4"})],8,X),[[V,l!==a.value.length-1]]),h(d("button",{type:"button",onClick:function(e){return function(e){a.value.splice(e,0,{value:"",unit:"s"})}(l+1)},class:"ml-2 py-2 px-2 rounded-md bg-blue-500 text-white hover:bg-blue-600 focus:bg-blue-700 focus:outline-none font-bold"},[v(b(M),{class:"h-4"})],8,O),[[V,l===a.value.length-1]]),h(d("button",{type:"button",onClick:function(e){return function(e){a.value.splice(e,1)}(l)},class:"ml-2 py-2 px-2 rounded-md bg-red-500 text-white hover:bg-red-600 focus:bg-red-700 focus:outline-none font-bold"},[v(b(F),{class:"h-4"})],8,q),[[V,a.value.length>1]])]),d("small",N,x(e.formatted),1)])})),128))])}}},G={class:"zfile-admin-down-link-body"},J={class:"text-red-400 font-bold"},K=d("ul",null,[d("li",null,[w("限制泛域名 "),d("span",{class:"text-red-400"},"http 协议"),w(" 全部子目录可访问："),d("div",{class:"inline select-all font-bold"},[d("span",{class:"text-red-400"},"http://"),w("*example.com/**")])]),d("li",null,[w("限制泛域名 "),d("span",{class:"text-red-400"},"https 协议"),w(" 全部子目录可访问："),d("div",{class:"inline select-all font-bold"},[d("span",{class:"text-red-400"},"https://"),w("*example.com/**")])]),d("li",null,[w("限制泛域名 "),d("span",{class:"text-red-400"},"全部协议"),w(" 全部子目录可访问："),d("div",{class:"inline select-all font-bold"},[d("span",{class:"text-red-400"},"*://"),w("*example.com/**")])])],-1),Q={key:0},Y={key:1},$={class:"mt-4"},ee=d("div",null,"可在下方输入你要测试的地址（应包含协议，路径，从浏览器地址栏复制就是了）",-1),le=d("span",null,"单 IP",-1),ne=d("span",null,"秒内允许下载",-1),te=d("span",null,"次",-1),ue=d("span",null,"设置直链防止恶意下载，单 IP N 秒内只允许访问 M 次直链，如其中一个为 0 则不做任何限制.",-1),ae=d("br",null,null,-1),oe=d("br",null,null,-1),re=d("span",null,"注意：此功能对直链、短链都有效，且共享限制次数。但直链/短链跳转后的实际下载链接无法限制，因为那些链接不经过 ZFile.",-1),ie=d("br",null,null,-1),ce=d("br",null,null,-1),de={class:"text-blue-400"},fe={class:"dialog-footer"};e("default",{__name:"basic-setting",setup:function(e){var o=T(),r=o.data,s=o.saveData,p=o.saveLoading,m=f("");U().then((function(e){m.value=e.data.data}));var j=f(""),P=f(null),A=z((function(){var e,l={antPath:null==r||null===(e=r.value)||void 0===e?void 0:e.refererValue,testPath:j.value};L(l).then((function(e){P.value=e.data.data}))}),250);return function(e,o){var f=C,T=n,U=R,L=W,z=a,D=u,F=l,M=t,S=Z;return i(),c("div",G,[b(r)?h((i(),y(M,{key:0,model:b(r),"element-loading-text":"保存中..."},{"form-title":g((function(){return[w(" 直/短链设置 ")]})),"form-sub-title":g((function(){return[w(" 这里可以配置直/短链相关设置 ")]})),footer:g((function(){return[d("span",fe,[v(F,{type:"primary",onClick:b(s)},{default:g((function(){return[w("保存")]})),_:1},8,["onClick"])])]})),default:g((function(){return[v(T,{label:"记录下载日志"},{tips:g((function(){return[w(" 是否记录直/短链下载日志 ")]})),default:g((function(){return[v(f,{modelValue:b(r).recordDownloadLog,"onUpdate:modelValue":o[0]||(o[0]=function(e){return b(r).recordDownloadLog=e})},null,8,["modelValue"])]})),_:1}),v(T,{label:"是否允许生成/使用直链（路径）"},{tips:g((function(){return[w(" 控制是否生成直链时显示直链路径及是否允许使用直链进行下载. ")]})),default:g((function(){return[v(f,{modelValue:b(r).showPathLink,"onUpdate:modelValue":o[1]||(o[1]=function(e){return b(r).showPathLink=e})},null,8,["modelValue"])]})),_:1}),v(T,{label:"直链地址前缀"},{tips:g((function(){return[w(" 直链地址前缀, 如 http(s)://ip:port/"),d("span",J,x(b(r).directLinkPrefix),1),w("/path/filename ")]})),default:g((function(){return[v(U,{modelValue:b(r).directLinkPrefix,"onUpdate:modelValue":o[2]||(o[2]=function(e){return b(r).directLinkPrefix=e})},null,8,["modelValue"])]})),_:1}),v(T,{label:"是否允许使用短链"},{tips:g((function(){return[w(" 控制是否生成直链时显示短链路径及是否允许使用短链进行下载 ")]})),default:g((function(){return[v(f,{modelValue:b(r).showShortLink,"onUpdate:modelValue":o[3]||(o[3]=function(e){return b(r).showShortLink=e})},null,8,["modelValue"])]})),_:1}),v(T,{label:"短链有效期"},{tips:g((function(){return[w(" 控制生成短链的有效期 ")]})),default:g((function(){return[v(L,{modelValue:b(r).linkExpireTimes,"onUpdate:modelValue":o[4]||(o[4]=function(e){return b(r).linkExpireTimes=e})},null,8,["modelValue"])]})),_:1}),v(T,{label:"Referer 防盗链"},{tips:g((function(){return[w(" 防盗链支持访问文件直链或短链时校验，如用户直接访问直链跳转后的存储源原始链接，无法进行校验和拦截。 ")]})),default:g((function(){return[v(z,{modelValue:b(r).refererType,"onUpdate:modelValue":o[5]||(o[5]=function(e){return b(r).refererType=e}),label:"off"},{default:g((function(){return[w("不启用 Referer 防盗链")]})),_:1},8,["modelValue"]),v(z,{modelValue:b(r).refererType,"onUpdate:modelValue":o[6]||(o[6]=function(e){return b(r).refererType=e}),label:"white_list"},{default:g((function(){return[w("启用白名单")]})),_:1},8,["modelValue"]),v(z,{modelValue:b(r).refererType,"onUpdate:modelValue":o[7]||(o[7]=function(e){return b(r).refererType=e}),label:"black_list"},{default:g((function(){return[w("启用黑名单")]})),_:1},8,["modelValue"])]})),_:1}),h(v(T,{label:"Referer 配置"},{default:g((function(){return[v(z,{modelValue:b(r).refererAllowEmpty,"onUpdate:modelValue":o[8]||(o[8]=function(e){return b(r).refererAllowEmpty=e}),label:!0},{default:g((function(){return[w("允许 Referer 为空")]})),_:1},8,["modelValue"]),v(z,{modelValue:b(r).refererAllowEmpty,"onUpdate:modelValue":o[9]||(o[9]=function(e){return b(r).refererAllowEmpty=e}),label:!1},{default:g((function(){return[w("禁止 Referer 为空")]})),_:1},8,["modelValue"])]})),_:1},512),[[V,"no"!==b(r).refererType]]),h(v(T,{label:"白名单"},{tips:g((function(){return[w(" 每行输入一个域名，如： "),K,"white_list"===b(r).refererType?(i(),c("div",Q," 每行输入一个域名，需要写协议头支持 * 通配符，如白名单 http://*zfile.vip 将只允许 http://zfile.vip、http://www.zfile.vip、http://demo.zfile.vip 等网站访问。 ")):k("",!0),"black_list"===b(r).refererType?(i(),c("div",Y," 每行输入一个域名，需要写协议头，支持 * 通配符，如黑名单 http://*zfile.vip 将禁止所有如 http://zfile.vip、http://www.zfile.vip、http://demo.zfile.vip 等网站访问。 ")):k("",!0),d("div",$,[ee,v(U,{onInput:b(A),modelValue:b(j),"onUpdate:modelValue":o[11]||(o[11]=function(e){return _(j)?j.value=e:null})},{suffix:g((function(){return[b(j)&&!0===b(P)?(i(),y(b(I),{key:0,class:"w-4 text-green-500"})):b(j)&&!1===b(P)?(i(),y(b(E),{key:1,class:"w-4 text-red-500"})):k("",!0)]})),_:1},8,["onInput","modelValue"])])]})),default:g((function(){return[v(U,{type:"textarea",onInput:b(A),rows:6,modelValue:b(r).refererValue,"onUpdate:modelValue":o[10]||(o[10]=function(e){return b(r).refererValue=e})},null,8,["onInput","modelValue"])]})),_:1},512),[[V,"no"!==b(r).refererType]]),v(T,{label:"直链下载限制"},{tips:g((function(){return[ue,ae,oe,re,ie,ce,d("span",null,[w('注意：如果你使用了反向代理，而不是直接访问的 ZFile 端口, 那你需要在反向代理处设置以下请求头为用户真实 IP："X-Forwarded-For", "X-Real-IP", "Proxy-Client-IP", "WL-Proxy-Client-IP", "HTTP_CLIENT_IP", "HTTP_X_FORWARDED_FOR"，不然不论谁访问 ZFile 都只能获取到反代服务器的 IP，同服务器一般是获取到 127.0.0.1 或 localhost, 这样此功能就无法正常使用!!! (辅助信息: 系统获取到您当前 IP 为 '),d("span",de,x(b(m)),1),w(")")])]})),default:g((function(){return[le,v(D,{modelValue:b(r).linkLimitSecond,"onUpdate:modelValue":o[12]||(o[12]=function(e){return b(r).linkLimitSecond=e}),min:0,max:86400,step:1,size:"small",class:"mx-2"},null,8,["modelValue"]),ne,v(D,{modelValue:b(r).linkDownloadLimit,"onUpdate:modelValue":o[13]||(o[13]=function(e){return b(r).linkDownloadLimit=e}),min:0,max:9999999,step:1,size:"small",class:"mx-2"},null,8,["modelValue"]),te]})),_:1})]})),_:1},8,["model"])),[[S,b(p)]]):k("",!0)])}}})}}}))}();
