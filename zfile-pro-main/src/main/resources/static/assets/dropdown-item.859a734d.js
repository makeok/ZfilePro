var Re=Object.defineProperty;var de=Object.getOwnPropertySymbols;var Se=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable;var ue=(e,o,t)=>o in e?Re(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,H=(e,o)=>{for(var t in o||(o={}))Se.call(o,t)&&ue(e,t,o[t]);if(de)for(var t of de(o))Oe.call(o,t)&&ue(e,t,o[t]);return e};import{b as ke,d as Z,m as E,_ as G,e as ve,x as me,E as ge,a as oe,f as Ne,g as Pe,j as De,w as Be,c as we}from"./base.9447ff7a.js";import{d as N,E as Ke,O as Le,w as ce}from"./popper.34e4046d.js";import{E as Me}from"./scrollbar.b58c5e8b.js";import{d as A,r as $,q as h,c as C,p as j,at as Ge,N as V,u as k,w as be,i as K,Z as w,a as D,b as U,e as v,j as R,Q as Ae,bo as ze,W as Ue,aC as Ye,a6 as He,Y as Ie,f as q,a7 as Ve,v as J,g as X,l as x,y as Je,m as We,h as ee,O as je,n as qe}from"./index.a81894c3.js";import{c as Qe,E as Ze,d as Xe,a as Ee,C as xe,b as eo,e as oo,f as no,g as to,F as ro,L as lo}from"./dropdown.5de453d7.js";import{u as so}from"./request.88c6336a.js";import{c as ao}from"./castArray.7c80ce00.js";import{c as _e}from"./refs.7263a917.js";import{F as io}from"./focus-trap.c21bbfc6.js";const uo=ke({style:{type:Z([String,Array,Object])},currentTabId:{type:Z(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:Z(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:co,ElCollectionItem:po,COLLECTION_INJECTION_KEY:ne,COLLECTION_ITEM_INJECTION_KEY:fo}=Qe("RovingFocusGroup"),te=Symbol("elRovingFocusGroup"),he=Symbol("elRovingFocusGroupItem"),vo={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},mo=(e,o)=>{if(o!=="rtl")return e;switch(e){case E.right:return E.left;case E.left:return E.right;default:return e}},go=(e,o,t)=>{const r=mo(e.key,t);if(!(o==="vertical"&&[E.left,E.right].includes(r))&&!(o==="horizontal"&&[E.up,E.down].includes(r)))return vo[r]},wo=(e,o)=>e.map((t,r)=>e[(r+o)%e.length]),re=e=>{const{activeElement:o}=document;for(const t of e)if(t===o||(t.focus(),o!==document.activeElement))return},pe="currentTabIdChange",fe="rovingFocusGroup.entryFocus",bo={bubbles:!1,cancelable:!0},Io=A({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:uo,emits:[pe,"entryFocus"],setup(e,{emit:o}){var t;const r=$((t=e.currentTabId||e.defaultCurrentTabId)!=null?t:null),c=$(!1),u=$(!1),a=$(null),{getItems:s}=h(ne,void 0),p=C(()=>[{outline:"none"},e.style]),m=i=>{o(pe,i)},g=()=>{c.value=!0},b=N(i=>{var f;(f=e.onMousedown)==null||f.call(e,i)},()=>{u.value=!0}),_=N(i=>{var f;(f=e.onFocus)==null||f.call(e,i)},i=>{const f=!k(u),{target:B,currentTarget:S}=i;if(B===S&&f&&!k(c)){const L=new Event(fe,bo);if(S==null||S.dispatchEvent(L),!L.defaultPrevented){const I=s().filter(F=>F.focusable),y=I.find(F=>F.active),T=I.find(F=>F.id===k(r)),M=[y,T,...I].filter(Boolean).map(F=>F.ref);re(M)}}u.value=!1}),n=N(i=>{var f;(f=e.onBlur)==null||f.call(e,i)},()=>{c.value=!1}),d=(...i)=>{o("entryFocus",...i)};j(te,{currentTabbedId:Ge(r),loop:V(e,"loop"),tabIndex:C(()=>k(c)?-1:0),rovingFocusGroupRef:a,rovingFocusGroupRootStyle:p,orientation:V(e,"orientation"),dir:V(e,"dir"),onItemFocus:m,onItemShiftTab:g,onBlur:n,onFocus:_,onMousedown:b}),be(()=>e.currentTabId,i=>{r.value=i!=null?i:null}),so(a,fe,d)}});function Eo(e,o,t,r,c,u){return K(e.$slots,"default")}var _o=G(Io,[["render",Eo],["__file","roving-focus-group-impl.vue"]]);const ho=A({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:co,ElRovingFocusGroupImpl:_o}});function Co(e,o,t,r,c,u){const a=w("el-roving-focus-group-impl"),s=w("el-focus-group-collection");return D(),U(s,null,{default:v(()=>[R(a,Ae(ze(e.$attrs)),{default:v(()=>[K(e.$slots,"default")]),_:3},16)]),_:3})}var yo=G(ho,[["render",Co],["__file","roving-focus-group.vue"]]);const $o=A({components:{ElRovingFocusCollectionItem:po},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:o}){const{currentTabbedId:t,loop:r,onItemFocus:c,onItemShiftTab:u}=h(te,void 0),{getItems:a}=h(ne,void 0),s=ve(),p=$(null),m=N(n=>{o("mousedown",n)},n=>{e.focusable?c(k(s)):n.preventDefault()}),g=N(n=>{o("focus",n)},()=>{c(k(s))}),b=N(n=>{o("keydown",n)},n=>{const{key:d,shiftKey:i,target:f,currentTarget:B}=n;if(d===E.tab&&i){u();return}if(f!==B)return;const S=go(n);if(S){n.preventDefault();let I=a().filter(y=>y.focusable).map(y=>y.ref);switch(S){case"last":{I.reverse();break}case"prev":case"next":{S==="prev"&&I.reverse();const y=I.indexOf(B);I=r.value?wo(I,y+1):I.slice(y+1);break}}Ue(()=>{re(I)})}}),_=C(()=>t.value===k(s));return j(he,{rovingFocusGroupItemRef:p,tabIndex:C(()=>k(_)?0:-1),handleMousedown:m,handleFocus:g,handleKeydown:b}),{id:s,handleKeydown:b,handleFocus:g,handleMousedown:m}}});function To(e,o,t,r,c,u){const a=w("el-roving-focus-collection-item");return D(),U(a,{id:e.id,focusable:e.focusable,active:e.active},{default:v(()=>[K(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var Fo=G($o,[["render",To],["__file","roving-focus-item.vue"]]);const Q=Symbol("elDropdown"),{ButtonGroup:Ro}=me,So=A({name:"ElDropdown",components:{ElButton:me,ElButtonGroup:Ro,ElScrollbar:Me,ElDropdownCollection:Ze,ElTooltip:Ke,ElRovingFocusGroup:yo,ElOnlyChild:Le,ElIcon:ge,ArrowDown:Ye},props:Xe,emits:["visible-change","click","command"],setup(e,{emit:o}){const t=Ie(),r=oe("dropdown"),{t:c}=Ne(),u=$(),a=$(),s=$(null),p=$(null),m=$(null),g=$(null),b=$(!1),_=[E.enter,E.space,E.down],n=C(()=>({maxHeight:Pe(e.maxHeight)})),d=C(()=>[r.m(y.value)]),i=C(()=>ao(e.trigger)),f=ve().value,B=C(()=>e.id||f);be([u,i],([l,O],[z])=>{var se,ae,ie;(se=z==null?void 0:z.$el)!=null&&se.removeEventListener&&z.$el.removeEventListener("pointerenter",P),(ae=l==null?void 0:l.$el)!=null&&ae.removeEventListener&&l.$el.removeEventListener("pointerenter",P),((ie=l==null?void 0:l.$el)==null?void 0:ie.addEventListener)&&O.includes("hover")&&l.$el.addEventListener("pointerenter",P)},{immediate:!0}),He(()=>{var l,O;(O=(l=u.value)==null?void 0:l.$el)!=null&&O.removeEventListener&&u.value.$el.removeEventListener("pointerenter",P)});function S(){L()}function L(){var l;(l=s.value)==null||l.onClose()}function I(){var l;(l=s.value)==null||l.onOpen()}const y=De();function T(...l){o("command",...l)}function P(){var l,O;(O=(l=u.value)==null?void 0:l.$el)==null||O.focus()}function M(){}function F(){const l=k(p);i.value.includes("hover")&&(l==null||l.focus()),g.value=null}function le(l){g.value=l}function W(l){b.value||(l.preventDefault(),l.stopImmediatePropagation())}function Y(){o("visible-change",!0)}function Te(l){(l==null?void 0:l.type)==="keydown"&&p.value.focus()}function Fe(){o("visible-change",!1)}return j(Q,{contentRef:p,role:C(()=>e.role),triggerId:B,isUsingKeyboard:b,onItemEnter:M,onItemLeave:F}),j("elDropdown",{instance:t,dropdownSize:y,handleClick:S,commandHandler:T,trigger:V(e,"trigger"),hideOnClick:V(e,"hideOnClick")}),{t:c,ns:r,scrollbar:m,wrapStyle:n,dropdownTriggerKls:d,dropdownSize:y,triggerId:B,triggerKeys:_,currentTabId:g,handleCurrentTabIdChange:le,handlerMainButtonClick:l=>{o("click",l)},handleEntryFocus:W,handleClose:L,handleOpen:I,handleBeforeShowTooltip:Y,handleShowTooltip:Te,handleBeforeHideTooltip:Fe,onFocusAfterTrapped:l=>{var O,z;l.preventDefault(),(z=(O=p.value)==null?void 0:O.focus)==null||z.call(O,{preventScroll:!0})},popperRef:s,contentRef:p,triggeringElementRef:u,referenceElementRef:a}}});function Oo(e,o,t,r,c,u){var a;const s=w("el-dropdown-collection"),p=w("el-roving-focus-group"),m=w("el-scrollbar"),g=w("el-only-child"),b=w("el-tooltip"),_=w("el-button"),n=w("arrow-down"),d=w("el-icon"),i=w("el-button-group");return D(),q("div",{class:X([e.ns.b(),e.ns.is("disabled",e.disabled)])},[R(b,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":(a=e.referenceElementRef)==null?void 0:a.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"",persistent:"",onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},Ve({content:v(()=>[R(m,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:v(()=>[R(p,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:v(()=>[R(s,null,{default:v(()=>[K(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:v(()=>[R(g,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:v(()=>[K(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(D(),U(i,{key:0},{default:v(()=>[R(_,J({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:v(()=>[K(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),R(_,J({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:v(()=>[R(d,{class:X(e.ns.e("icon"))},{default:v(()=>[R(n)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):x("v-if",!0)],2)}var ko=G(So,[["render",Oo],["__file","dropdown.vue"]]);const No=A({name:"DropdownItemImpl",components:{ElIcon:ge},props:Ee,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:o}){const t=oe("dropdown"),{role:r}=h(Q,void 0),{collectionItemRef:c}=h(xe,void 0),{collectionItemRef:u}=h(fo,void 0),{rovingFocusGroupItemRef:a,tabIndex:s,handleFocus:p,handleKeydown:m,handleMousedown:g}=h(he,void 0),b=_e(c,u,a),_=C(()=>r.value==="menu"?"menuitem":r.value==="navigation"?"link":"button"),n=N(d=>{const{code:i}=d;if(i===E.enter||i===E.space)return d.preventDefault(),d.stopImmediatePropagation(),o("clickimpl",d),!0},m);return{ns:t,itemRef:b,dataset:{[eo]:""},role:_,tabIndex:s,handleFocus:p,handleKeydown:n,handleMousedown:g}}}),Po=["aria-disabled","tabindex","role"];function Do(e,o,t,r,c,u){const a=w("el-icon");return D(),q(je,null,[e.divided?(D(),q("li",J({key:0,role:"separator",class:e.ns.bem("menu","item","divided")},e.$attrs),null,16)):x("v-if",!0),Je("li",J({ref:e.itemRef},H(H({},e.dataset),e.$attrs),{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:o[0]||(o[0]=s=>e.$emit("clickimpl",s)),onFocus:o[1]||(o[1]=(...s)=>e.handleFocus&&e.handleFocus(...s)),onKeydown:o[2]||(o[2]=ee((...s)=>e.handleKeydown&&e.handleKeydown(...s),["self"])),onMousedown:o[3]||(o[3]=(...s)=>e.handleMousedown&&e.handleMousedown(...s)),onPointermove:o[4]||(o[4]=s=>e.$emit("pointermove",s)),onPointerleave:o[5]||(o[5]=s=>e.$emit("pointerleave",s))}),[e.icon?(D(),U(a,{key:0},{default:v(()=>[(D(),U(We(e.icon)))]),_:1})):x("v-if",!0),K(e.$slots,"default")],16,Po)],64)}var Bo=G(No,[["render",Do],["__file","dropdown-item-impl.vue"]]);const Ce=()=>{const e=h("elDropdown",{}),o=C(()=>e==null?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:o}},Ko=A({name:"ElDropdownItem",components:{ElDropdownCollectionItem:oo,ElRovingFocusItem:Fo,ElDropdownItemImpl:Bo},inheritAttrs:!1,props:Ee,emits:["pointermove","pointerleave","click"],setup(e,{emit:o,attrs:t}){const{elDropdown:r}=Ce(),c=Ie(),u=$(null),a=C(()=>{var n,d;return(d=(n=k(u))==null?void 0:n.textContent)!=null?d:""}),{onItemEnter:s,onItemLeave:p}=h(Q,void 0),m=N(n=>(o("pointermove",n),n.defaultPrevented),ce(n=>{if(e.disabled){p(n);return}const d=n.currentTarget;d===document.activeElement||d.contains(document.activeElement)||(s(n),n.defaultPrevented||d==null||d.focus())})),g=N(n=>(o("pointerleave",n),n.defaultPrevented),ce(n=>{p(n)})),b=N(n=>{if(!e.disabled)return o("click",n),n.type!=="keydown"&&n.defaultPrevented},n=>{var d,i,f;if(e.disabled){n.stopImmediatePropagation();return}(d=r==null?void 0:r.hideOnClick)!=null&&d.value&&((i=r.handleClick)==null||i.call(r)),(f=r.commandHandler)==null||f.call(r,e.command,c,n)}),_=C(()=>H(H({},e),t));return{handleClick:b,handlePointerMove:m,handlePointerLeave:g,textContent:a,propsAndAttrs:_}}});function Lo(e,o,t,r,c,u){var a;const s=w("el-dropdown-item-impl"),p=w("el-roving-focus-item"),m=w("el-dropdown-collection-item");return D(),U(m,{disabled:e.disabled,"text-value":(a=e.textValue)!=null?a:e.textContent},{default:v(()=>[R(p,{focusable:!e.disabled},{default:v(()=>[R(s,J(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:v(()=>[K(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var ye=G(Ko,[["render",Lo],["__file","dropdown-item.vue"]]);const Mo=A({name:"ElDropdownMenu",props:no,setup(e){const o=oe("dropdown"),{_elDropdownSize:t}=Ce(),r=t.value,{focusTrapRef:c,onKeydown:u}=h(io,void 0),{contentRef:a,role:s,triggerId:p}=h(Q,void 0),{collectionRef:m,getItems:g}=h(to,void 0),{rovingFocusGroupRef:b,rovingFocusGroupRootStyle:_,tabIndex:n,onBlur:d,onFocus:i,onMousedown:f}=h(te,void 0),{collectionRef:B}=h(ne,void 0),S=C(()=>[o.b("menu"),o.bm("menu",r==null?void 0:r.value)]),L=_e(a,m,c,b,B),I=N(T=>{var P;(P=e.onKeydown)==null||P.call(e,T)},T=>{const{currentTarget:P,code:M,target:F}=T;if(P.contains(F),E.tab===M&&T.stopImmediatePropagation(),T.preventDefault(),F!==k(a)||!ro.includes(M))return;const W=g().filter(Y=>!Y.disabled).map(Y=>Y.ref);lo.includes(M)&&W.reverse(),re(W)});return{size:r,rovingFocusGroupRootStyle:_,tabIndex:n,dropdownKls:S,role:s,triggerId:p,dropdownListWrapperRef:L,handleKeydown:T=>{I(T),u(T)},onBlur:d,onFocus:i,onMousedown:f}}}),Go=["role","aria-labelledby"];function Ao(e,o,t,r,c,u){return D(),q("ul",{ref:e.dropdownListWrapperRef,class:X(e.dropdownKls),style:qe(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:o[0]||(o[0]=(...a)=>e.onBlur&&e.onBlur(...a)),onFocus:o[1]||(o[1]=(...a)=>e.onFocus&&e.onFocus(...a)),onKeydown:o[2]||(o[2]=ee((...a)=>e.handleKeydown&&e.handleKeydown(...a),["self"])),onMousedown:o[3]||(o[3]=ee((...a)=>e.onMousedown&&e.onMousedown(...a),["self"]))},[K(e.$slots,"default")],46,Go)}var $e=G(Mo,[["render",Ao],["__file","dropdown-menu.vue"]]);const xo=Be(ko,{DropdownItem:ye,DropdownMenu:$e}),en=we(ye),on=we($e);export{en as E,on as a,xo as b};
