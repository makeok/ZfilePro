import{g as b,t as I,a as A,G as R,S as C,ac as X,l as G,r as U,b as W,d as w}from"./base.9447ff7a.js";import{o as h,aF as z,a6 as K,ae as V,b7 as $,w as j,as as q,a0 as v,d as J,j as Q,i as Y,U as Z}from"./index.a81894c3.js";import{a as g}from"./scroll.c1d55f52.js";var l=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(l||{});const de=(e,t,n)=>{let s={offsetX:0,offsetY:0};const u=i=>{const a=i.clientX,m=i.clientY,{offsetX:r,offsetY:f}=s,c=e.value.getBoundingClientRect(),E=c.left,p=c.top,N=c.width,O=c.height,x=document.documentElement.clientWidth,D=document.documentElement.clientHeight,k=-E+r,_=-p+f,H=x-E-N+r,B=D-p-O+f,T=S=>{const M=Math.min(Math.max(r+S.clientX-a,k),H),L=Math.min(Math.max(f+S.clientY-m,_),B);s={offsetX:M,offsetY:L},e.value&&(e.value.style.transform=`translate(${b(M)}, ${b(L)})`)},y=()=>{document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",T),document.addEventListener("mouseup",y)},d=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",u)},o=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",u)};h(()=>{z(()=>{n.value?d():o()})}),K(()=>{o()})},ie=(e,t={})=>{V(e)||I("[useLockscreen]","You need to pass a ref param to this function");const n=t.ns||A("popup"),s=$(()=>n.bm("parent","hidden"));if(!R||C(document.body,s.value))return;let u=0,d=!1,o="0";const i=()=>{setTimeout(()=>{U(document==null?void 0:document.body,s.value),d&&document&&(document.body.style.width=o)},200)};j(e,a=>{if(!a){i();return}d=!C(document.body,s.value),d&&(o=document.body.style.width),u=g(n.namespace.value);const m=document.documentElement.clientHeight<document.body.scrollHeight,r=X(document.body,"overflowY");u>0&&(m||r==="scroll")&&d&&(document.body.style.width=`calc(100% - ${u}px)`),G(document.body,s.value)}),q(()=>i())},P=e=>{if(!e)return{onClick:v,onMousedown:v,onMouseup:v};let t=!1,n=!1;return{onClick:o=>{t&&n&&e(o),t=n=!1},onMousedown:o=>{t=o.target===o.currentTarget},onMouseup:o=>{n=o.target===o.currentTarget}}},F=W({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:w([String,Array,Object])},zIndex:{type:w([String,Number])}}),ee={click:e=>e instanceof MouseEvent},oe="overlay";var te=J({name:"ElOverlay",props:F,emits:ee,setup(e,{slots:t,emit:n}){const s=A(oe),u=a=>{n("click",a)},{onClick:d,onMousedown:o,onMouseup:i}=P(e.customMaskEvent?void 0:u);return()=>e.mask?Q("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:o,onMouseup:i},[Y(t,"default")],l.STYLE|l.CLASS|l.PROPS,["onClick","onMouseup","onMousedown"]):Z("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[Y(t,"default")])}});const ae=te;export{ae as E,P as a,ie as b,de as u};
