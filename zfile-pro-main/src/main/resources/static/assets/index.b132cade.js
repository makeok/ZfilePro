var v=(d,p,l)=>new Promise((f,t)=>{var _=o=>{try{m(l.next(o))}catch(e){t(e)}},x=o=>{try{m(l.throw(o))}catch(e){t(e)}},m=o=>o.done?f(o.value):Promise.resolve(o.value).then(_,x);m((l=l.apply(d,p)).next())});import{x as y}from"./base.9447ff7a.js";import{E as V,a as k}from"./form-item.c881aa55.js";/* empty css               *//* empty css              */import{ac as I,r as g,S as E,ap as N,a9 as S,a as U,f as z,y as r,j as s,e as n,u as a,bd as C,b8 as q,b9 as M,ak as R,z as B,h as F,bb as j,af as D,ag as G}from"./index.a81894c3.js";import{_ as L}from"./zfile-basic.8b129fdf.js";import{i as T,a as $}from"./install.0554d8be.js";import{_ as A}from"./plugin-vue_export-helper.21dcd24c.js";import{r as H}from"./CheckBadgeIcon.5c38551d.js";import{E as b}from"./request.88c6336a.js";import{E as J}from"./index.9dce3cd8.js";import"./castArray.7c80ce00.js";import"./index.b1a3ab43.js";import"./_Uint8Array.25475a91.js";import"./_initCloneObject.df1878fc.js";import"./event.807e9a54.js";const K=d=>(D("data-v-0697a817"),d=d(),G(),d),O={class:"h-full min-h-screen bg-gray-100 text-gray-900 flex justify-center items-center"},P={class:"h-full lg:h-auto max-w-screen-lg bg-white shadow-xl sm:rounded-xl flex flex-1"},Q=K(()=>r("div",{class:"flex-1 bg-gray-50 text-center hidden lg:flex rounded-l-xl"},[r("div",{class:"m-12 xl:m-16 w-full bg-contain bg-center bg-no-repeat zfile-install-logo"})],-1)),W={class:"w-full lg:w-1/2 xl:w-1/2 mt-10 p-6 sm:p-12"},X={class:"mt-0 flex flex-col items-center"},Y={class:"text-2xl mt-0 xl:text-3xl font-extrabold box animate__animated animate__fadeInDown"},Z={class:"w-full flex-1"},ee=j('<div class="my-12 relative" data-v-0697a817><div class="absolute inset-0 flex items-center" aria-hidden="true" data-v-0697a817><div class="w-full border-t text-gray-600" data-v-0697a817></div></div><div class="relative flex justify-center text-sm" data-v-0697a817><span class="px-2 bg-white text-sm leading-none text-gray-600 tracking-wide font-medium" data-v-0697a817>\u7CFB\u7EDF\u521D\u59CB\u5316</span></div></div>',1),ae={__name:"index",setup(d){let p=I(),l=g(!1),f=g(),t=E({siteName:"",username:"",password:"",domain:""}),_=g({siteName:[{required:!0,message:"\u8BF7\u8F93\u5165\u7AD9\u70B9\u540D\u79F0",trigger:["change","blur"]}],username:[{required:!0,message:"\u8BF7\u8F93\u5165\u7BA1\u7406\u5458\u8D26\u53F7",trigger:["change","blur"]}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u7BA1\u7406\u5458\u5BC6\u7801",trigger:["change","blur"]}],domain:[{required:!0,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u57DF\u540D\uFF0C\u9700\u4EE5 http:// \u6216 https:// \u5F00\u5934",trigger:"change"}]});const x=o=>{window.open(o)},m=()=>v(this,null,function*(){yield f.value.validate(o=>{o?(l.value=!0,$(t).then(e=>{b({message:"\u521D\u59CB\u5316\u6210\u529F",type:e.code===0?"success":"error",duration:1500,onClose(){p.push("/")}})}).finally(()=>{l.value=!1})):b.warning("\u8BF7\u6B63\u786E\u8F93\u5165\u521D\u59CB\u5316\u503C!")})});return N(()=>{const o=S();t.domain=o.zfileConfig.baseUrl||window.location.origin,T().then(e=>{e.data&&p.push("/")})}),(o,e)=>{const c=J,u=V,w=y,h=k;return U(),z("div",O,[r("div",P,[Q,r("div",W,[r("div",X,[r("h1",Y,[r("img",{class:"w-16 cursor-pointer",onClick:e[0]||(e[0]=i=>x("https://github.com/zhaojun1998/zfile")),src:L})]),r("div",Z,[ee,s(h,{onSubmit:e[5]||(e[5]=F(()=>{},["prevent"])),ref_key:"installFormRef",ref:f,rules:a(_),model:a(t),class:"zfile-install-form",size:"large"},{default:n(()=>[s(u,{class:"box animate__animated animate__fadeInUp",prop:"siteName"},{default:n(()=>[s(c,{placeholder:"\u7AD9\u70B9\u540D\u79F0","prefix-icon":a(C),modelValue:a(t).siteName,"onUpdate:modelValue":e[1]||(e[1]=i=>a(t).siteName=i)},null,8,["prefix-icon","modelValue"])]),_:1}),s(u,{class:"box animate__animated animate__fadeInUp",prop:"username"},{default:n(()=>[s(c,{placeholder:"\u7BA1\u7406\u5458\u8D26\u53F7","prefix-icon":a(q),modelValue:a(t).username,"onUpdate:modelValue":e[2]||(e[2]=i=>a(t).username=i),modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue"])]),_:1}),s(u,{class:"box animate__animated animate__fadeInUp",prop:"password"},{default:n(()=>[s(c,{placeholder:"\u7BA1\u7406\u5458\u5BC6\u7801",type:"password","show-password":"","prefix-icon":a(M),modelValue:a(t).password,"onUpdate:modelValue":e[3]||(e[3]=i=>a(t).password=i),modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue"])]),_:1}),s(u,{class:"box animate__animated animate__fadeInUp",prop:"domain"},{default:n(()=>[s(c,{placeholder:"\u7AD9\u70B9\u5730\u5740/\u57DF\u540D","prefix-icon":a(R),modelValue:a(t).domain,"onUpdate:modelValue":e[4]||(e[4]=i=>a(t).domain=i),modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue"])]),_:1}),s(u,null,{default:n(()=>[s(w,{"native-type":"submit",loading:a(l),class:"w-full",type:"primary",icon:a(H),onClick:m},{default:n(()=>[B(" \u7CFB\u7EDF\u521D\u59CB\u5316 ")]),_:1},8,["loading","icon"])]),_:1})]),_:1},8,["rules","model"])])])])])])}}};var be=A(ae,[["__scopeId","data-v-0697a817"]]);export{be as default};
