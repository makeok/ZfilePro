var ce=Object.defineProperty,de=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var pe=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable;var W=(t,c,u)=>c in t?ce(t,c,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[c]=u,Y=(t,c)=>{for(var u in c||(c={}))pe.call(c,u)&&W(t,u,c[u]);if(R)for(var u of R(c))be.call(c,u)&&W(t,u,c[u]);return t},q=(t,c)=>de(t,me(c));import{d as ne,r as fe,S as ve,c as h,w as Ne,o as Ve,_ as he,a as f,f as T,D as H,u as r,g as z,C as _,j as K,e as J,b as S,aC as ye,bf as Ie,l as Q,aD as ge,bg as we,h as P,L as Ee}from"./index.a81894c3.js";import{E as _e}from"./index.9dce3cd8.js";import{b as Se,T as Pe,i as b,p as I,f as Ce,a as Fe,$ as Ae,k as C,j as ke,q as xe,E as X,_ as Be,t as De,v as Z,w as Te}from"./base.9447ff7a.js";import{C as te,I as F,U as y}from"./event.807e9a54.js";import{v as ee}from"./index.2160775f.js";const ze=Se({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:Pe,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:t=>t===null||b(t)||["min","max"].includes(t),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:t=>t>=0&&t===Number.parseInt(`${t}`,10)},validateEvent:{type:Boolean,default:!0}}),Ke={[te]:(t,c)=>c!==t,blur:t=>t instanceof FocusEvent,focus:t=>t instanceof FocusEvent,[F]:t=>b(t)||I(t),[y]:t=>b(t)||I(t)},Me=["aria-label","onKeydown"],Oe=["aria-label","onKeydown"],Ue=ne({name:"ElInputNumber"}),$e=ne(q(Y({},Ue),{props:ze,emits:Ke,setup(t,{expose:c,emit:u}){const l=t,{t:M}=Ce(),m=Fe("input-number"),N=fe(),s=ve({currentValue:l.modelValue,userInput:null}),{formItem:v}=Ae(),O=h(()=>b(l.modelValue)&&l.modelValue<=l.min),U=h(()=>b(l.modelValue)&&l.modelValue>=l.max),re=h(()=>{const e=L(l.step);return C(l.precision)?Math.max(L(l.modelValue),e):(e>l.precision,l.precision)}),A=h(()=>l.controls&&l.controlsPosition==="right"),$=ke(),V=xe(),k=h(()=>{if(s.userInput!==null)return s.userInput;let e=s.currentValue;if(I(e))return"";if(b(e)){if(Number.isNaN(e))return"";C(l.precision)||(e=e.toFixed(l.precision))}return e}),x=(e,n)=>{if(C(n)&&(n=re.value),n===0)return Math.round(e);let a=String(e);const o=a.indexOf(".");if(o===-1||!a.replace(".","").split("")[o+n])return e;const w=a.length;return a.charAt(w-1)==="5"&&(a=`${a.slice(0,Math.max(0,w-1))}6`),Number.parseFloat(Number(a).toFixed(n))},L=e=>{if(I(e))return 0;const n=e.toString(),a=n.indexOf(".");let o=0;return a!==-1&&(o=n.length-a-1),o},j=(e,n=1)=>b(e)?x(e+l.step*n):s.currentValue,B=()=>{if(l.readonly||V.value||U.value)return;const e=Number(k.value)||0,n=j(e);g(n),u(F,s.currentValue)},D=()=>{if(l.readonly||V.value||O.value)return;const e=Number(k.value)||0,n=j(e,-1);g(n),u(F,s.currentValue)},G=(e,n)=>{const{max:a,min:o,step:i,precision:p,stepStrictly:w,valueOnClear:E}=l;a<o&&De("InputNumber","min should not be greater than max.");let d=Number(e);if(I(e)||Number.isNaN(d))return null;if(e===""){if(E===null)return null;d=Ee(E)?{min:o,max:a}[E]:E}return w&&(d=x(Math.round(d/i)*i,p)),C(p)||(d=x(d,p)),(d>a||d<o)&&(d=d>a?a:o,n&&u(y,d)),d},g=(e,n=!0)=>{var a;const o=s.currentValue,i=G(e);if(!n){u(y,i);return}o!==i&&(s.userInput=null,u(y,i),u(te,i,o),l.validateEvent&&((a=v==null?void 0:v.validate)==null||a.call(v,"change").catch(p=>Z())),s.currentValue=i)},ae=e=>{s.userInput=e;const n=e===""?null:Number(e);u(F,n),g(n,!1)},le=e=>{const n=e!==""?Number(e):"";(b(n)&&!Number.isNaN(n)||e==="")&&g(n),s.userInput=null},ue=()=>{var e,n;(n=(e=N.value)==null?void 0:e.focus)==null||n.call(e)},se=()=>{var e,n;(n=(e=N.value)==null?void 0:e.blur)==null||n.call(e)},oe=e=>{u("focus",e)},ie=e=>{var n;s.userInput=null,u("blur",e),l.validateEvent&&((n=v==null?void 0:v.validate)==null||n.call(v,"blur").catch(a=>Z()))};return Ne(()=>l.modelValue,(e,n)=>{const a=G(e,!0);s.userInput===null&&a!==n&&(s.currentValue=a)},{immediate:!0}),Ve(()=>{var e;const{min:n,max:a,modelValue:o}=l,i=(e=N.value)==null?void 0:e.input;if(i.setAttribute("role","spinbutton"),Number.isFinite(a)?i.setAttribute("aria-valuemax",String(a)):i.removeAttribute("aria-valuemax"),Number.isFinite(n)?i.setAttribute("aria-valuemin",String(n)):i.removeAttribute("aria-valuemin"),i.setAttribute("aria-valuenow",s.currentValue||s.currentValue===0?String(s.currentValue):""),i.setAttribute("aria-disabled",String(V.value)),!b(o)&&o!=null){let p=Number(o);Number.isNaN(p)&&(p=null),u(y,p)}}),he(()=>{var e,n;const a=(e=N.value)==null?void 0:e.input;a==null||a.setAttribute("aria-valuenow",`${(n=s.currentValue)!=null?n:""}`)}),c({focus:ue,blur:se}),(e,n)=>(f(),T("div",{class:z([r(m).b(),r(m).m(r($)),r(m).is("disabled",r(V)),r(m).is("without-controls",!e.controls),r(m).is("controls-right",r(A))]),onDragstart:n[1]||(n[1]=P(()=>{},["prevent"]))},[e.controls?H((f(),T("span",{key:0,role:"button","aria-label":r(M)("el.inputNumber.decrease"),class:z([r(m).e("decrease"),r(m).is("disabled",r(O))]),onKeydown:_(D,["enter"])},[K(r(X),null,{default:J(()=>[r(A)?(f(),S(r(ye),{key:0})):(f(),S(r(Ie),{key:1}))]),_:1})],42,Me)),[[r(ee),D]]):Q("v-if",!0),e.controls?H((f(),T("span",{key:1,role:"button","aria-label":r(M)("el.inputNumber.increase"),class:z([r(m).e("increase"),r(m).is("disabled",r(U))]),onKeydown:_(B,["enter"])},[K(r(X),null,{default:J(()=>[r(A)?(f(),S(r(ge),{key:0})):(f(),S(r(we),{key:1}))]),_:1})],42,Oe)),[[r(ee),B]]):Q("v-if",!0),K(r(_e),{id:e.id,ref_key:"input",ref:N,type:"number",step:e.step,"model-value":r(k),placeholder:e.placeholder,readonly:e.readonly,disabled:r(V),size:r($),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onWheel:n[0]||(n[0]=P(()=>{},["prevent"])),onKeydown:[_(P(B,["prevent"]),["up"]),_(P(D,["prevent"]),["down"])],onBlur:ie,onFocus:oe,onInput:ae,onChange:le},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}}));var Le=Be($e,[["__file","input-number.vue"]]);const He=Te(Le);export{He as E};
