!function(){var e=document.createElement("style");e.innerHTML=".zfile-admin-down-link[data-v-4aed3672] .el-select-dropdown__item{padding-right:15px}.zfile-admin-down-link[data-v-4aed3672] .el-dialog__header{text-align:center}.zfile-admin-down-link[data-v-4aed3672] .el-dialog__body{height:80vh;overflow-y:auto}\n",document.head.appendChild(e),System.register(["./base-legacy.ba5b7a3a.js","./card-legacy.81c5d15b.js","./zh-cn-legacy.d68086c4.js","./input-legacy.d4357d07.js","./tag-legacy.9310c6c1.js","./select-legacy.02e0f252.js","./scrollbar-legacy.c143c6a7.js","./popper-legacy.2c9263bf.js","./table-legacy.945e9ff4.js","./checkbox-legacy.6e841900.js","./tooltip-legacy.7c89f687.js","./popover-legacy.0eba315a.js","./button-legacy.96a0013c.js","./SvgIcon-legacy.040a47d9.js","./table-column-legacy.ab1663ac.js","./form-item-legacy.262988f0.js","./switch-legacy.23086081.js","./useLinkSetting-legacy.417054dd.js","./index-legacy.559a5434.js","./admin-storage-legacy.ee536f65.js","./vue3-clipboard.esm-bundler-legacy.3ad9a827.js","./admin-setting-legacy.05018def.js","./common-legacy.88f12ec9.js","./route-block-legacy.9534e494.js","./plugin-vue_export-helper-legacy.7bb61c33.js","./request-legacy.a1774e71.js","./index-legacy.7381ad7d.js","./index-legacy.dafda260.js","./dayjs.min-legacy.80ef429f.js","./index-legacy.7281359a.js","./debounce-legacy.078b4aef.js","./index-legacy.004982e8.js","./_Uint8Array-legacy.be503b59.js","./event-legacy.d3c9bc11.js","./scroll-legacy.0e94e88d.js","./validator-legacy.df5a4111.js","./focus-trap-legacy.a75696a1.js","./_initCloneObject-legacy.b6e01a01.js","./castArray-legacy.5a944edb.js","./index-legacy.e449b062.js","./unit-legacy.203f0ef2.js","./index-legacy.bd66d165.js"],(function(e){"use strict";var n,t,a,o,l,u,c,i,r,d,f,s,p,g,y,m,v,h,b,w,j,_,x,k,V,C,K,z,U,E,A,D,S,T,L,P,I,R,Y,F,H,M,O,q,N,B,G,J,Q,W,X;return{setters:[function(e){n=e.x},function(e){t=e.E},function(e){a=e.E,o=e.a,l=e.b,u=e.c,c=e.z,i=e.f,r=e.h,d=e.i,f=e.j},function(){},function(e){s=e.E},function(e){p=e.E,g=e.a},function(){},function(e){y=e.E},function(e){m=e.E,v=e.a},function(){},function(){},function(){},function(){},function(e){h=e._},function(){},function(e){b=e.E,w=e.a},function(e){j=e.E},function(e){_=e.u},function(e){x=e.S,k=e.r,V=e.o,C=e.a,K=e.f,z=e.j,U=e.e,E=e.y,A=e.u,D=e.l,S=e.ae,T=e.O,L=e.P,P=e.b,I=e.A,R=e.bi,Y=e.z,F=e.a3,H=e.af,M=e.ag},function(e){O=e.l},function(e){q=e.t},function(e){N=e.l},function(e){B=e.c},function(e){G=e.b},function(e){J=e._},function(e){Q=e.E},function(e){W=e.E},function(e){X=e.E},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){var Z=function(e){return H("data-v-4aed3672"),e=e(),M(),e},$={class:"zfile-admin-down-link"},ee={class:"flex justify-between"},ne=Z((function(){return E("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," 下载日志 ",-1)})),te={key:0,class:"flex space-x-1.5 justify-center items-center cursor-pointer"},ae=Z((function(){return E("span",{class:"text-gray-400 text-sm font-bold"},"记录下载日志：",-1)})),oe={class:"mt-4"},le={class:"flex justify-between space-x-20"},ue={class:"text-gray-400"},ce={class:"mb-2"},ie={key:0,class:"space-x-2"},re={key:1},de={__name:"log",setup:function(e){var H=_(),M=H.data,G=H.saveData,J=(H.saveLoading,x({shortKey:"",storageKey:null,page:1,limit:10,path:"",ip:"",userAgent:"",referer:"",date:"",dateFrom:"",dateTo:"",total:0})),Z=function(e){J.limit=e,J.page=1,pe()},de=function(e){J.page=e,pe()},fe=function(){return J.date instanceof Array?(J.dateFrom=J.date[0],J.dateTo=J.date[1]):(J.dateFrom="",J.dateTo=""),J},se=k(),pe=function(){i(fe()).then((function(e){se.value=e.data,J.total=e.dataCount}))};V((function(){pe(),ve(),ye()}));var ge=k(),ye=function(){N().then((function(e){ge.value=e.data}))},me=k(),ve=function(){O().then((function(e){me.value=e.data}))},he=k(),be=function(){var e=he.value.getSelectionRows();0!==e.length?W.confirm("是否确认删除？","提示",{type:"warning"}).then((function(){var n=e.map((function(e){return e.id}));d({ids:n}).then((function(e){Q.success("删除成功"),pe()}))})):Q.warning("请至少选择一条数据")},we=function(){W.confirm("是否确认删除当前查询条件下的 ".concat(J.total," 条直链下载日志？(如数量不对，请先点击查询后再用该功能按条件删除)"),"提示",{type:"warning"}).then((function(){f(fe()).then((function(e){Q.success("清空成功"),pe()}))}))},je=function(e){q(e).then((function(){Q.success("复制成功")}))},_e=function(e){window.open(e)},xe=function(e){var n;return B.removeDuplicateSeparator("".concat(null==ge||null===(n=ge.value)||void 0===n?void 0:n.domain,"/s/").concat(e))},ke=function(e){var n,t;return B.removeDuplicateSeparator("".concat(null==ge||null===(n=ge.value)||void 0===n?void 0:n.domain,"/").concat(null==ge||null===(t=ge.value)||void 0===t?void 0:t.directLinkPrefix,"/").concat(e.storageKey,"/").concat(e.path))};return function(e,i){var d=j,f=p,_=g,x=b,k=X,V=a,H=n,O=w,q=m,N=y,B=s,W=h,fe=o,ge=v,ye=l,ve=u,Ve=t;return C(),K("div",$,[z(Ve,null,{default:U((function(){return[E("div",ee,[ne,A(M)?(C(),K("div",te,[ae,z(d,{onChange:A(G),"active-text":"是","inline-prompt":"","inactive-text":"否",modelValue:A(M).recordDownloadLog,"onUpdate:modelValue":i[0]||(i[0]=function(e){return A(M).recordDownloadLog=e})},null,8,["onChange","modelValue"])])):D("",!0)]),E("div",oe,[z(O,{inline:"",modelValue:A(J),"onUpdate:modelValue":i[8]||(i[8]=function(e){return S(J)?J.value=e:null})},{default:U((function(){return[z(x,{label:"存储源"},{default:U((function(){return[z(_,{clearable:"",teleported:!1,modelValue:A(J).storageKey,"onUpdate:modelValue":i[1]||(i[1]=function(e){return A(J).storageKey=e}),placeholder:"请选择存储源"},{default:U((function(){return[(C(!0),K(T,null,L(A(me),(function(e){return C(),P(f,{key:e.id,label:e.name,value:e.key},{default:U((function(){return[E("div",le,[E("span",null,I(e.name),1),E("span",ue,I(e.type.description),1)])]})),_:2},1032,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),z(x,{label:"短链 Key"},{default:U((function(){return[z(k,{modelValue:A(J).shortKey,"onUpdate:modelValue":i[2]||(i[2]=function(e){return A(J).shortKey=e})},null,8,["modelValue"])]})),_:1}),z(x,{label:"文件路径"},{default:U((function(){return[z(k,{modelValue:A(J).path,"onUpdate:modelValue":i[3]||(i[3]=function(e){return A(J).path=e})},null,8,["modelValue"])]})),_:1}),z(x,{label:"请求 IP"},{default:U((function(){return[z(k,{modelValue:A(J).ip,"onUpdate:modelValue":i[4]||(i[4]=function(e){return A(J).ip=e})},null,8,["modelValue"])]})),_:1}),z(x,{label:"UserAgent"},{default:U((function(){return[z(k,{modelValue:A(J).userAgent,"onUpdate:modelValue":i[5]||(i[5]=function(e){return A(J).userAgent=e})},null,8,["modelValue"])]})),_:1}),z(x,{label:"Referer"},{default:U((function(){return[z(k,{modelValue:A(J).referer,"onUpdate:modelValue":i[6]||(i[6]=function(e){return A(J).referer=e})},null,8,["modelValue"])]})),_:1}),z(x,{label:"下载时间"},{default:U((function(){return[z(V,{modelValue:A(J).date,"onUpdate:modelValue":i[7]||(i[7]=function(e){return A(J).date=e}),type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,2,1,23,59,59)],"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue","default-time"])]})),_:1}),z(x,null,{default:U((function(){return[z(H,{type:"primary",icon:A(R),onClick:pe},{default:U((function(){return[Y("查询")]})),_:1},8,["icon"])]})),_:1})]})),_:1},8,["modelValue"]),E("div",ce,[z(H,{onClick:be,icon:A(F),type:"danger"},{default:U((function(){return[Y("批量删除选中")]})),_:1},8,["icon"]),z(H,{onClick:we,icon:A(F),type:"danger"},{default:U((function(){return[Y("删除全部页")]})),_:1},8,["icon"])]),z(ge,{border:"",ref_key:"linkTableRef",ref:he,size:"large",data:A(se),style:{width:"100%"}},{default:U((function(){return[z(q,{type:"selection",width:"55"}),z(q,{fixed:"",width:"120",label:"存储源名称"},{default:U((function(e){var n;return[z(N,{content:null===(n=e.row.storageType)||void 0===n?void 0:n.description,placement:"right"},{default:U((function(){return[E("span",null,I(e.row.storageName),1)]})),_:2},1032,["content"])]})),_:1}),z(q,{fixed:"",width:"90",align:"center",label:"下载类型"},{default:U((function(e){return[e.row.shortKey?(C(),P(B,{key:0,type:"success"},{default:U((function(){return[Y("短链")]})),_:1})):(C(),P(B,{key:1},{default:U((function(){return[Y("直链")]})),_:1}))]})),_:1}),z(q,{"min-width":"400","show-overflow-tooltip":!0,prop:"shortKey",label:"下载链接"},{default:U((function(e){return[e.row.shortKey?(C(),K("div",ie,[E("span",null,I(A(xe)(e.row.shortKey)),1),z(W,{onClick:function(n){return A(je)(A(xe)(e.row.shortKey))},class:"ml-2 inline cursor-pointer",name:"copy"},null,8,["onClick"]),z(W,{onClick:function(n){return A(_e)(A(xe)(e.row.shortKey))},class:"ml-1 inline cursor-pointer text-blue-500 text-sm",name:"target"},null,8,["onClick"])])):(C(),K("div",re,[E("span",null,I(A(ke)(e.row)),1),z(W,{onClick:function(n){return A(je)(A(ke)(e.row))},class:"ml-2 inline cursor-pointer",name:"copy"},null,8,["onClick"]),z(W,{onClick:function(n){return A(_e)(A(ke)(e.row))},class:"ml-1 inline cursor-pointer text-blue-500 text-sm",name:"target"},null,8,["onClick"])]))]})),_:1}),z(q,{width:"300","show-overflow-tooltip":!0,prop:"path",label:"文件路径"}),z(q,{width:"100","show-overflow-tooltip":!0,prop:"ip",label:"请求 IP"}),z(q,{width:"250","show-overflow-tooltip":!0,prop:"userAgent",label:"UserAgent"}),z(q,{width:"200","show-overflow-tooltip":!0,prop:"referer",label:"Referer"}),z(q,{width:"155",prop:"createTime",label:"下载时间"}),z(q,{fixed:"right",width:"120",label:"操作"},{default:U((function(e){return[z(fe,{title:"是否确认删除?",onConfirm:function(n){return t=e.row.id,void r(t).then((function(e){Q.success("删除成功"),pe()}));var t}},{reference:U((function(){return[z(H,{icon:A(F),type:"danger"},{default:U((function(){return[Y("删除")]})),_:1},8,["icon"])]})),_:2},1032,["onConfirm"])]})),_:1})]})),_:1},8,["data"]),z(ve,{locale:A(c)},{default:U((function(){return[z(ye,{class:"mt-3","page-size":A(J).limit,background:"",layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:de,onSizeChange:Z,"current-page":A(J).page,"onUpdate:currentPage":i[9]||(i[9]=function(e){return A(J).page=e}),"default-current-page":10,"page-sizes":[10,50,100,200,1e3,99999999],total:A(J).total},null,8,["page-size","current-page","total"])]})),_:1},8,["locale"])])]})),_:1})])}}};"function"==typeof G&&G(de);e("default",J(de,[["__scopeId","data-v-4aed3672"]]))}}}))}();
