import{x as ne}from"./base.9447ff7a.js";import{E as re}from"./card.da6ac894.js";import{E as se,a as ie,b as de,c as pe,z as me,f as ue,h as ce,i as _e,j as fe}from"./zh-cn.5fe3352b.js";/* empty css              */import{E as ge}from"./tag.be7f307a.js";import{E as he,a as we}from"./select.06aace55.js";import"./scrollbar.b58c5e8b.js";import{E as ye}from"./popper.34e4046d.js";import{E as ve,a as be}from"./table.7b0ce08e.js";import"./checkbox.adc9a1be.js";import"./tooltip.afcd3f9d.js";/* empty css                *//* empty css               */import{_ as ke}from"./SvgIcon.bb4e9d6f.js";/* empty css                     */import{E as xe,a as Ve}from"./form-item.c881aa55.js";import{E as Ee}from"./switch.0dde4485.js";import{u as Ce}from"./useLinkSetting.8332213f.js";import{S as Le,r as x,o as De,a as m,f as h,j as e,e as r,y as s,u as o,l as Se,ae as Ke,O as Te,P as Ue,b as L,A as w,bi as $e,z as f,a3 as D,af as ze,ag as Pe}from"./index.a81894c3.js";import{l as Re}from"./admin-storage.576b99eb.js";import{t as Ae}from"./vue3-clipboard.esm-bundler.0bd39b9d.js";import{l as Be}from"./admin-setting.1db20681.js";import{c as R}from"./common.d1611fb2.js";import{b as A}from"./route-block.89f12ae7.js";import{_ as Ie}from"./plugin-vue_export-helper.21dcd24c.js";import{E as y}from"./request.88c6336a.js";import{E as B}from"./index.9f034646.js";import{E as je}from"./index.9dce3cd8.js";import"./dayjs.min.48a99d24.js";import"./index.2160775f.js";import"./debounce.ff28d2f1.js";import"./index.3b295ed4.js";import"./_Uint8Array.25475a91.js";import"./event.807e9a54.js";import"./scroll.c1d55f52.js";import"./validator.4f1297a1.js";import"./focus-trap.c21bbfc6.js";import"./_initCloneObject.df1878fc.js";import"./castArray.7c80ce00.js";import"./index.b1a3ab43.js";import"./unit.5ed4b9cd.js";import"./index.1d04ede7.js";const I=v=>(ze("data-v-4aed3672"),v=v(),Pe(),v),Fe={class:"zfile-admin-down-link"},Me={class:"flex justify-between"},Ne=I(()=>s("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," \u4E0B\u8F7D\u65E5\u5FD7 ",-1)),qe={key:0,class:"flex space-x-1.5 justify-center items-center cursor-pointer"},Ye=I(()=>s("span",{class:"text-gray-400 text-sm font-bold"},"\u8BB0\u5F55\u4E0B\u8F7D\u65E5\u5FD7\uFF1A",-1)),He={class:"mt-4"},Oe={class:"flex justify-between space-x-20"},Qe={class:"text-gray-400"},Ge={class:"mb-2"},Je={key:0,class:"space-x-2"},We={key:1},j={__name:"log",setup(v){const{data:V,saveData:F,saveLoading:Xe}=Ce(),a=Le({shortKey:"",storageKey:null,page:1,limit:10,path:"",ip:"",userAgent:"",referer:"",date:"",dateFrom:"",dateTo:"",total:0}),M=n=>{a.limit=n,a.page=1,u()},N=n=>{a.page=n,u()},S=()=>(a.date instanceof Array?(a.dateFrom=a.date[0],a.dateTo=a.date[1]):(a.dateFrom="",a.dateTo=""),a),K=x(),u=()=>{ue(S()).then(n=>{K.value=n.data,a.total=n.dataCount})};De(()=>{u(),Y(),q()});const i=x(),q=()=>{Be().then(n=>{i.value=n.data})},T=x(),Y=()=>{Re().then(n=>{T.value=n.data})},H=n=>{ce(n).then(l=>{y.success("\u5220\u9664\u6210\u529F"),u()})},U=x(),O=()=>{let n=U.value.getSelectionRows();if(n.length===0){y.warning("\u8BF7\u81F3\u5C11\u9009\u62E9\u4E00\u6761\u6570\u636E");return}B.confirm("\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>{let l=n.map(c=>c.id);_e({ids:l}).then(c=>{y.success("\u5220\u9664\u6210\u529F"),u()})})},Q=()=>{B.confirm(`\u662F\u5426\u786E\u8BA4\u5220\u9664\u5F53\u524D\u67E5\u8BE2\u6761\u4EF6\u4E0B\u7684 ${a.total} \u6761\u76F4\u94FE\u4E0B\u8F7D\u65E5\u5FD7\uFF1F(\u5982\u6570\u91CF\u4E0D\u5BF9\uFF0C\u8BF7\u5148\u70B9\u51FB\u67E5\u8BE2\u540E\u518D\u7528\u8BE5\u529F\u80FD\u6309\u6761\u4EF6\u5220\u9664)`,"\u63D0\u793A",{type:"warning"}).then(()=>{fe(S()).then(n=>{y.success("\u6E05\u7A7A\u6210\u529F"),u()})})};let $=n=>{Ae(n).then(()=>{y.success("\u590D\u5236\u6210\u529F")})},z=n=>{window.open(n)},E=n=>{var l;return R.removeDuplicateSeparator(`${(l=i==null?void 0:i.value)==null?void 0:l.domain}/s/${n}`)},C=n=>{var l,c;return R.removeDuplicateSeparator(`${(l=i==null?void 0:i.value)==null?void 0:l.domain}/${(c=i==null?void 0:i.value)==null?void 0:c.directLinkPrefix}/${n.storageKey}/${n.path}`)};return(n,l)=>{const c=Ee,G=he,J=we,p=xe,g=je,W=se,b=ne,X=Ve,d=ve,Z=ye,P=ge,k=ke,ee=ie,te=be,oe=de,ae=pe,le=re;return m(),h("div",Fe,[e(le,null,{default:r(()=>[s("div",Me,[Ne,o(V)?(m(),h("div",qe,[Ye,e(c,{onChange:o(F),"active-text":"\u662F","inline-prompt":"","inactive-text":"\u5426",modelValue:o(V).recordDownloadLog,"onUpdate:modelValue":l[0]||(l[0]=t=>o(V).recordDownloadLog=t)},null,8,["onChange","modelValue"])])):Se("",!0)]),s("div",He,[e(X,{inline:"",modelValue:o(a),"onUpdate:modelValue":l[8]||(l[8]=t=>Ke(a)?a.value=t:null)},{default:r(()=>[e(p,{label:"\u5B58\u50A8\u6E90"},{default:r(()=>[e(J,{clearable:"",teleported:!1,modelValue:o(a).storageKey,"onUpdate:modelValue":l[1]||(l[1]=t=>o(a).storageKey=t),placeholder:"\u8BF7\u9009\u62E9\u5B58\u50A8\u6E90"},{default:r(()=>[(m(!0),h(Te,null,Ue(o(T),t=>(m(),L(G,{key:t.id,label:t.name,value:t.key},{default:r(()=>[s("div",Oe,[s("span",null,w(t.name),1),s("span",Qe,w(t.type.description),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"\u77ED\u94FE Key"},{default:r(()=>[e(g,{modelValue:o(a).shortKey,"onUpdate:modelValue":l[2]||(l[2]=t=>o(a).shortKey=t)},null,8,["modelValue"])]),_:1}),e(p,{label:"\u6587\u4EF6\u8DEF\u5F84"},{default:r(()=>[e(g,{modelValue:o(a).path,"onUpdate:modelValue":l[3]||(l[3]=t=>o(a).path=t)},null,8,["modelValue"])]),_:1}),e(p,{label:"\u8BF7\u6C42 IP"},{default:r(()=>[e(g,{modelValue:o(a).ip,"onUpdate:modelValue":l[4]||(l[4]=t=>o(a).ip=t)},null,8,["modelValue"])]),_:1}),e(p,{label:"UserAgent"},{default:r(()=>[e(g,{modelValue:o(a).userAgent,"onUpdate:modelValue":l[5]||(l[5]=t=>o(a).userAgent=t)},null,8,["modelValue"])]),_:1}),e(p,{label:"Referer"},{default:r(()=>[e(g,{modelValue:o(a).referer,"onUpdate:modelValue":l[6]||(l[6]=t=>o(a).referer=t)},null,8,["modelValue"])]),_:1}),e(p,{label:"\u4E0B\u8F7D\u65F6\u95F4"},{default:r(()=>[e(W,{modelValue:o(a).date,"onUpdate:modelValue":l[7]||(l[7]=t=>o(a).date=t),type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,2,1,23,59,59)],"range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65F6\u95F4","end-placeholder":"\u7ED3\u675F\u65F6\u95F4"},null,8,["modelValue","default-time"])]),_:1}),e(p,null,{default:r(()=>[e(b,{type:"primary",icon:o($e),onClick:u},{default:r(()=>[f("\u67E5\u8BE2")]),_:1},8,["icon"])]),_:1})]),_:1},8,["modelValue"]),s("div",Ge,[e(b,{onClick:O,icon:o(D),type:"danger"},{default:r(()=>[f("\u6279\u91CF\u5220\u9664\u9009\u4E2D")]),_:1},8,["icon"]),e(b,{onClick:Q,icon:o(D),type:"danger"},{default:r(()=>[f("\u5220\u9664\u5168\u90E8\u9875")]),_:1},8,["icon"])]),e(te,{border:"",ref_key:"linkTableRef",ref:U,size:"large",data:o(K),style:{width:"100%"}},{default:r(()=>[e(d,{type:"selection",width:"55"}),e(d,{fixed:"",width:"120",label:"\u5B58\u50A8\u6E90\u540D\u79F0"},{default:r(t=>{var _;return[e(Z,{content:(_=t.row.storageType)==null?void 0:_.description,placement:"right"},{default:r(()=>[s("span",null,w(t.row.storageName),1)]),_:2},1032,["content"])]}),_:1}),e(d,{fixed:"",width:"90",align:"center",label:"\u4E0B\u8F7D\u7C7B\u578B"},{default:r(t=>[t.row.shortKey?(m(),L(P,{key:0,type:"success"},{default:r(()=>[f("\u77ED\u94FE")]),_:1})):(m(),L(P,{key:1},{default:r(()=>[f("\u76F4\u94FE")]),_:1}))]),_:1}),e(d,{"min-width":"400","show-overflow-tooltip":!0,prop:"shortKey",label:"\u4E0B\u8F7D\u94FE\u63A5"},{default:r(t=>[t.row.shortKey?(m(),h("div",Je,[s("span",null,w(o(E)(t.row.shortKey)),1),e(k,{onClick:_=>o($)(o(E)(t.row.shortKey)),class:"ml-2 inline cursor-pointer",name:"copy"},null,8,["onClick"]),e(k,{onClick:_=>o(z)(o(E)(t.row.shortKey)),class:"ml-1 inline cursor-pointer text-blue-500 text-sm",name:"target"},null,8,["onClick"])])):(m(),h("div",We,[s("span",null,w(o(C)(t.row)),1),e(k,{onClick:_=>o($)(o(C)(t.row)),class:"ml-2 inline cursor-pointer",name:"copy"},null,8,["onClick"]),e(k,{onClick:_=>o(z)(o(C)(t.row)),class:"ml-1 inline cursor-pointer text-blue-500 text-sm",name:"target"},null,8,["onClick"])]))]),_:1}),e(d,{width:"300","show-overflow-tooltip":!0,prop:"path",label:"\u6587\u4EF6\u8DEF\u5F84"}),e(d,{width:"100","show-overflow-tooltip":!0,prop:"ip",label:"\u8BF7\u6C42 IP"}),e(d,{width:"250","show-overflow-tooltip":!0,prop:"userAgent",label:"UserAgent"}),e(d,{width:"200","show-overflow-tooltip":!0,prop:"referer",label:"Referer"}),e(d,{width:"155",prop:"createTime",label:"\u4E0B\u8F7D\u65F6\u95F4"}),e(d,{fixed:"right",width:"120",label:"\u64CD\u4F5C"},{default:r(t=>[e(ee,{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664?",onConfirm:_=>H(t.row.id)},{reference:r(()=>[e(b,{icon:o(D),type:"danger"},{default:r(()=>[f("\u5220\u9664")]),_:1},8,["icon"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"]),e(ae,{locale:o(me)},{default:r(()=>[e(oe,{class:"mt-3","page-size":o(a).limit,background:"",layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:N,onSizeChange:M,"current-page":o(a).page,"onUpdate:currentPage":l[9]||(l[9]=t=>o(a).page=t),"default-current-page":10,"page-sizes":[10,50,100,200,1e3,99999999],total:o(a).total},null,8,["page-size","current-page","total"])]),_:1},8,["locale"])])]),_:1})])}}};typeof A=="function"&&A(j);var Ft=Ie(j,[["__scopeId","data-v-4aed3672"]]);export{Ft as default};
