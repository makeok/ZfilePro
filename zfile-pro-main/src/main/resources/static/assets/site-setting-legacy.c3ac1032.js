!function(){var e=document.createElement("style");e.innerHTML=".el-button[data-v-620c505a],.el-input[data-v-620c505a] input{height:35px}\n",document.head.appendChild(e),System.register(["./base-legacy.ba5b7a3a.js","./loading-legacy.a92cda73.js","./ZFormItem-legacy.eb663a6a.js","./input-number-legacy.2f507e7b.js","./input-legacy.d4357d07.js","./radio-legacy.c0dc2361.js","./popper-legacy.2c9263bf.js","./popover-legacy.0eba315a.js","./button-legacy.96a0013c.js","./index-legacy.559a5434.js","./admin-setting-legacy.05018def.js","./request-legacy.a1774e71.js","./route-block-legacy.9534e494.js","./plugin-vue_export-helper-legacy.7bb61c33.js","./index-legacy.6f6e6bce.js","./CheckBadgeIcon-legacy.21039039.js","./index-legacy.dafda260.js","./directive-legacy.1a2f693e.js","./index-legacy.e449b062.js","./event-legacy.d3c9bc11.js","./index-legacy.7281359a.js","./focus-trap-legacy.a75696a1.js","./dropdown-legacy.c3570a0b.js"],(function(e){"use strict";var n,t,a,o,i,l,u,r,c,f,d,s,m,p,g,v,x,b,V,y,h,w,L,_,j,U,H,k,C,M,Z,D,z,N,E;return{setters:[function(e){n=e.x},function(){},function(e){t=e.Z,a=e.a},function(e){o=e.E},function(){},function(e){i=e.E},function(){},function(){},function(){},function(e){l=e.a,u=e.f,r=e.y,c=e.bc,f=e.a9,d=e.r,s=e.w,m=e.u,p=e.D,g=e.b,v=e.e,x=e.z,b=e.j,V=e.bd,y=e.ak,h=e.E,w=e.A,L=e.be,_=e.l,j=e.af,U=e.ag},function(e){H=e.l,k=e.u},function(e){C=e.E},function(e){M=e.b},function(e){Z=e._},function(e){D=e.E},function(e){z=e.r},function(e){N=e.E},function(e){E=e.v},function(){},function(){},function(){},function(){},function(){}],execute:function(){function T(e,n){return l(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function A(e,n){return l(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{d:"M11.47 3.841a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 0 1.06-1.061l-8.689-8.69a2.25 2.25 0 0 0-3.182 0l-8.69 8.69a.75.75 0 1 0 1.061 1.06l8.69-8.689Z"}),r("path",{d:"m12 5.432 8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75V21a.75.75 0 0 1-.75.75H5.625a1.875 1.875 0 0 1-1.875-1.875v-6.198a2.29 2.29 0 0 0 .091-.086L12 5.432Z"})])}function B(e,n){return l(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"fill-rule":"evenodd",d:"M1.5 6a2.25 2.25 0 0 1 2.25-2.25h16.5A2.25 2.25 0 0 1 22.5 6v12a2.25 2.25 0 0 1-2.25 2.25H3.75A2.25 2.25 0 0 1 1.5 18V6ZM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0 0 21 18v-1.94l-2.69-2.689a1.5 1.5 0 0 0-2.12 0l-.88.879.97.97a.75.75 0 1 1-1.06 1.06l-5.16-5.159a1.5 1.5 0 0 0-2.12 0L3 16.061Zm10.125-7.81a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Z","clip-rule":"evenodd"})])}function F(e,n){return l(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"fill-rule":"evenodd",d:"M12.516 2.17a.75.75 0 0 0-1.032 0 11.209 11.209 0 0 1-7.877 3.08.75.75 0 0 0-.722.515A12.74 12.74 0 0 0 2.25 9.75c0 5.942 4.064 10.933 9.563 12.348a.749.749 0 0 0 .374 0c5.499-1.415 9.563-6.406 9.563-12.348 0-1.39-.223-2.73-.635-3.985a.75.75 0 0 0-.722-.516l-.143.001c-2.996 0-5.717-1.17-7.734-3.08Zm3.094 8.016a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"})])}var q=function(e){return j("data-v-620c505a"),e=e(),U(),e},S={class:"mt-2"},I=q((function(){return r("span",{class:"text-red-500 text-sm"},"设置异常，点击查看",-1)})),R={class:"text-sm"},G={class:"mb-2"},J={class:"text-red-500"},K={class:"flex justify-end"},O={class:"mt-2"},P=q((function(){return r("span",{class:"text-red-500 text-sm"},"设置异常，点击查看",-1)})),Q={class:"text-sm"},W={class:"mb-2"},X={class:"text-red-500"},Y={class:"flex justify-end"},$={__name:"site-setting",setup:function(e){var u=f(),j=function(){var e=c(H,{formatResult:function(e){return e.data}}),n=e.data,t=e.loading,a=e.reload,o=c(k,{manual:!0,onSuccess:function(){C({message:"保存成功",type:"success"})}}),i=o.loading,l=o.run;return{data:n,dataLoading:t,reload:a,saveData:function(){l(n.value)},saveLoading:i}}(),U=j.data,M=j.dataLoading,Z=j.saveData,q=j.saveLoading,$=d({siteName:[{required:!0,message:"请输入站点名称"}],faviconUrl:[{type:"url",message:"请输入正确的 favicon 地址，需以 http 或 https 开头"}],domain:[{required:!0,message:"请输入后端站点域名"}],frontDomain:[],avatar:[{type:"url",message:"请输入正确的头像地址，需以 http 或 https 开头"}]}),ee=d(),ne=function(){document.querySelector(".z-form").click(),ee.value.validate((function(e){e&&Z()}))},te=d({flag:!1,except:"",action:function(){}}),ae=d({flag:!1,except:"",action:function(){}});return s((function(){return M.value}),(function(e,n){if(!0===n){var t=u.zfileConfig.baseUrl||window.location.origin,a=U.value.domain;t!==a&&(te.value.flag=!0,te.value.current=a,te.value.except=t,te.value.action=function(){U.value.domain=t,ne(),te.value.flag=!1});var o=U.value.frontDomain,i=window.location.origin;""!==u.zfileConfig.baseUrl&&o!==i?(ae.value.flag=!0,ae.value.current=o,ae.value.except=i,ae.value.action=function(){U.value.frontDomain=i,ne(),ae.value.flag=!1}):""===u.zfileConfig.baseUrl&&o&&(ae.value.flag=!0,ae.value.current=o,ae.value.except="空",ae.value.action=function(){U.value.frontDomain="",ne(),ae.value.flag=!1})}})),function(e,u){var c=N,f=t,d=n,s=D,j=i,H=o,k=a,C=E;return m(U)?p((l(),g(k,{key:0,model:m(U),rules:m($),ref_key:"siteSettingForm",ref:ee},{"form-title":v((function(){return[x(" 站点信息 ")]})),"form-sub-title":v((function(){return[x(" 请填写您的站点信息 ")]})),footer:v((function(){return[b(d,{type:"primary",size:"default",icon:m(z),onClick:ne},{default:v((function(){return[x("保存设置")]})),_:1},8,["icon"])]})),default:v((function(){return[b(f,{prop:"siteName",label:"站点名称"},{default:v((function(){return[b(c,{id:"siteName","prefix-icon":m(V),modelValue:m(U).siteName,"onUpdate:modelValue":u[0]||(u[0]=function(e){return m(U).siteName=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),b(f,{prop:"faviconUrl",label:"站点 favicon"},{tips:v((function(){return[x("网站在浏览器标题栏的 favicon 图标，需确保输入的地址没有 referer 防盗链，如修改后不生效请清理浏览器缓存或再试。")]})),default:v((function(){return[b(c,{id:"faviconUrl","prefix-icon":m(V),modelValue:m(U).faviconUrl,"onUpdate:modelValue":u[1]||(u[1]=function(e){return m(U).faviconUrl=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),b(f,{prop:"domain",label:"后端站点域名"},{tips:v((function(){return[x("此地址用于生成直链及本次存储下载使用，请务必保持和服务端地址一样 (需写 http(s):// 协议头)")]})),default:v((function(){return[b(c,{id:"domain","prefix-icon":m(y),modelValue:m(U).domain,"onUpdate:modelValue":u[2]||(u[2]=function(e){return m(U).domain=e})},null,8,["prefix-icon","modelValue"]),b(s,{placement:"right",width:400,trigger:"click"},{reference:v((function(){return[p(r("div",S,[I,b(m(T),{class:"inline w-5 text-red-500"})],512),[[h,m(te).flag]])]})),default:v((function(){return[r("div",R,[r("div",G,[x("检测到设置异常，实际后端域名应为 "),r("span",J,w(m(te).except),1),x("，是否需要修复？（不修正可能会影响下载、文件夹加密和文档预览功能）")]),r("div",K,[b(d,{size:"small",type:"warning",icon:m(z),onClick:m(te).action},{default:v((function(){return[x("自动修正")]})),_:1},8,["icon","onClick"])])])]})),_:1})]})),_:1}),b(f,{prop:"frontDomain",label:"前端站点域名"},{tips:v((function(){return[x("前后端分离后，需配置此地址，会影响 401、403、404 页面的跳转 (需写 http(s):// 协议头，未前后端分离请保持为空)")]})),default:v((function(){return[b(c,{"prefix-icon":m(y),modelValue:m(U).frontDomain,"onUpdate:modelValue":u[3]||(u[3]=function(e){return m(U).frontDomain=e})},null,8,["prefix-icon","modelValue"]),b(s,{placement:"right",width:400,trigger:"click"},{reference:v((function(){return[p(r("div",O,[P,b(m(T),{class:"inline w-5 text-red-500"})],512),[[h,m(ae).flag]])]})),default:v((function(){return[r("div",Q,[r("div",W,[x("检测到设置异常，实际前端域名应为 "),r("span",X,w(m(ae).except),1),x("，是否需要修复？（不修正会影响 401、403、404 页面的跳转功能）")]),r("div",Y,[b(d,{size:"small",type:"warning",icon:m(z),onClick:m(ae).action},{default:v((function(){return[x("自动修正")]})),_:1},8,["icon","onClick"])])])]})),_:1})]})),_:1}),b(f,{prop:"avatar",label:"头像地址"},{tips:v((function(){return[x("用于管理员页面右上角头像地址，推荐尺寸为 35 * 35.")]})),default:v((function(){return[b(c,{id:"avatar","prefix-icon":m(L),modelValue:m(U).avatar,"onUpdate:modelValue":u[4]||(u[4]=function(e){return m(U).avatar=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),b(f,{prop:"siteHomeName",label:"根路径名称"},{tips:v((function(){return[x("用于设置首页上方面包屑根目录的默认名称.")]})),default:v((function(){return[b(c,{id:"siteHomeName","prefix-icon":m(A),modelValue:m(U).siteHomeName,"onUpdate:modelValue":u[5]||(u[5]=function(e){return m(U).siteHomeName=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),b(f,{prop:"siteHomeLogo",label:"首页 Logo 图片地址"},{tips:v((function(){return[x("用于设置首页上面包屑左侧 Logo，留空为不显示，会自动居中显示，如有需要可通过自定义 css 来修改默认样式, logo 元素的 id 为 zfile-home-logo")]})),default:v((function(){return[b(c,{id:"siteHomeLogo","prefix-icon":m(B),modelValue:m(U).siteHomeLogo,"onUpdate:modelValue":u[6]||(u[6]=function(e){return m(U).siteHomeLogo=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),b(f,{prop:"siteHomeLogoLink",label:"首页 Logo 打开链接"},{tips:v((function(){return[x("点击 Logo 链接后打开的地址，为空则点击不进行任何跳转")]})),default:v((function(){return[b(c,{id:"siteHomeLogoLink","prefix-icon":m(y),modelValue:m(U).siteHomeLogoLink,"onUpdate:modelValue":u[7]||(u[7]=function(e){return m(U).siteHomeLogoLink=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),b(f,{prop:"siteHomeLogoTargetMode",label:"首页 Logo 链接打开方式"},{tips:v((function(){return[x("控制 Logo 链接的打开方式")]})),default:v((function(){return[b(j,{modelValue:m(U).siteHomeLogoTargetMode,"onUpdate:modelValue":u[8]||(u[8]=function(e){return m(U).siteHomeLogoTargetMode=e}),label:"_blank"},{default:v((function(){return[x("新标签打开")]})),_:1},8,["modelValue"]),b(j,{modelValue:m(U).siteHomeLogoTargetMode,"onUpdate:modelValue":u[9]||(u[9]=function(e){return m(U).siteHomeLogoTargetMode=e}),label:"_self"},{default:v((function(){return[x("当前页面打开")]})),_:1},8,["modelValue"])]})),_:1}),b(f,{label:"备案号"},{default:v((function(){return[b(c,{id:"icp","prefix-icon":m(F),modelValue:m(U).icp,"onUpdate:modelValue":u[10]||(u[10]=function(e){return m(U).icp=e})},null,8,["prefix-icon","modelValue"])]})),_:1}),b(f,{label:"最大同时上传文件数"},{default:v((function(){return[b(H,{id:"maxFileUploads",modelValue:m(U).maxFileUploads,"onUpdate:modelValue":u[11]||(u[11]=function(e){return m(U).maxFileUploads=e}),min:1,max:99},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])),[[C,m(q)]]):_("",!0)}}};"function"==typeof M&&M($);e("default",Z($,[["__scopeId","data-v-620c505a"]]))}}}))}();
