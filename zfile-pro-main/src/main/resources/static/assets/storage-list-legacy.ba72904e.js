System.register(["./admin-storage-legacy.ee536f65.js","./sortable.esm-legacy.a39a4582.js","./useCommon-legacy.4286f5a2.js","./index-legacy.559a5434.js","./storage-copy-legacy.d407b149.js","./index-legacy.7381ad7d.js","./request-legacy.a1774e71.js"],(function(e){"use strict";var a,n,t,o,c,r,s,i,u,l,d,f,g;return{setters:[function(e){a=e.d,n=e.s,t=e.a,o=e.b,c=e.l,r=e.c},function(e){s=e.S},function(e){i=e.u},function(e){u=e.r,l=e.c},function(e){d=e.u},function(e){f=e.E},function(e){g=e.E}],execute:function(){e("u",(function(e){var i=function(a){e.push("/admin/storage-edit/"+a.id)},u=function(e){f.confirm("是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(n){"confirm"===n&&a(e.id).then((function(e){g.success("删除成功"),L()}))}})},d=function(a){e.push("/admin/storage-filter/"+a.id)},x=function(a){e.push("/admin/storage-readme/"+a.id)},C=function(a){e.push("/admin/storage-password/"+a.id)},k=function(e){f.confirm("是否确认".concat(e.enable?"停止":"启用","存储源。"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(a){if("confirm"===a){var t=e.enable?"disable":"enable";n(e.id,t).then((function(){g.success((e.enable?"停止":"启用")+"成功"),e.enable=!e.enable}))}}})},S=function(e){m.value=e.id,b.value=!0},L=function(){v.value=!0,c().then((function(e){var a;p.value=e.data,a=document.querySelector(".storage-container"),s.create(a,{draggable:".storage-item",filter:".add-storage-btn",delay:h.value?300:0,onEnd:function(e){if(e.oldIndex!==e.newIndex){var a=p.value.splice(e.oldIndex,1)[0];p.value.splice(e.newIndex,0,a),r(p.value).then((function(){g.success("调整排序成功")}))}}}),v.value=!1}))},M=l((function(){return""===w.value?p.value:p.value.filter((function(e){return!!(e.name&&-1!==e.name.toLowerCase().indexOf(w.value.toLowerCase())||e.remark&&-1!==e.remark.toLowerCase().indexOf(w.value.toLowerCase())||e.type&&-1!==e.type.description.toLowerCase().indexOf(w.value.toLowerCase())||e.type&&-1!==e.type.key.toLowerCase().indexOf(w.value.toLowerCase()))}))}));return{init:L,loading:v,searchKey:w,storageListSearchResult:M,handleOperator:function(a){switch(a.operator){case"edit":i(a.storage);break;case"enable":k(a.storage);break;case"readmeManager":x(a.storage);break;case"cacheManager":S(a.storage);break;case"filterManager":d(a.storage);break;case"pwdManager":C(a.storage);break;case"authManager":n=a.storage,e.push("/admin/storage-auth/"+n.id);break;case"delete":u(a.storage);break;case"copy":y(a.storage)}var n},addStorage:function(){e.push("/admin/storage-edit")},editStorage:i,deleteStorage:u,handleClose:function(e){f.confirm("是否确认关闭？关闭后填写的数据不会保留。",{type:"warning"}).then((function(a){e()})).catch((function(e){}))},showFilterPage:d,showReadmePage:x,showPasswordPage:C,switchEnableStatus:k,cacheManageVisible:b,currentCacheManageId:m,switchCacheEnableStatus:function(e){var a=e.enableCache?"enable":"disable";t(e.id,a).then((function(){g.success("修改成功")}))},switchCacheAutoRefreshStatus:function(e){var a=e.autoRefreshCache?"start":"stop";o(e.id,a).then((function(){g.success("修改成功")}))},cacheManage:S}}));var h=i().isMobile,b=u(!1),m=u(),v=u(!1),p=u([]),w=u(""),y=d().openDialog}}}));
