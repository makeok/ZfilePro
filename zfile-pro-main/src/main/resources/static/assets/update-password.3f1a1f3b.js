import{x as z}from"./base.9447ff7a.js";/* empty css                */import{Z as b,a as Z}from"./ZFormItem.85c758c5.js";/* empty css               *//* empty css              */import{r as f,o as D,D as M,u as r,a as $,b as q,e as s,z as w,j as a,b8 as F,b9 as _}from"./index.a81894c3.js";import{r as A}from"./user.0f1e81c7.js";import{E as U}from"./request.88c6336a.js";import{b as g}from"./route-block.89f12ae7.js";import{r as B}from"./CheckBadgeIcon.5c38551d.js";import{E as I}from"./index.9dce3cd8.js";import{v as L}from"./directive.8a34351b.js";import"./index.b1a3ab43.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./event.807e9a54.js";const N=window.localStorage.getItem("zfile-user"),P=JSON.parse(N),m=f({username:P.username,oldPassword:"",password:"",repassword:""}),R=f({username:[{required:!0,message:"\u8BF7\u8F93\u5165\u7BA1\u7406\u5458\u8D26\u53F7"}],oldPassword:[{required:!0,message:"\u8BF7\u8F93\u5165\u539F\u5BC6\u7801"}],password:[{required:!0,validator:(l,e,o)=>{if(e==null||e==="")o(new Error("\u8BF7\u8F93\u5165\u5BC6\u7801"));else{if(!/^(?=.*[A-Za-z])(?=.*\d)(?=.*[`~!@#$%^&*()_+<>?:"{},.\/\\;'[\]])[A-Za-z\d`~!@#$%^&*()_+<>?:"{},.\/\\;'[\]]{8,}$/.test(e)){o(new Error("\u81F3\u5C118\u4F4D\u4E14\u5FC5\u6709\u6570\u5B57+\u7279\u6B8A\u5B57\u7B26+\u5B57\u6BCD"));return}o()}}}],repassword:[{required:!0,validator:(l,e,o)=>{if(e==="")o(new Error("\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801"));else if(e!==m.value.password)o(new Error("\u4E24\u6B21\u8F93\u5165\u5BC6\u7801\u4E0D\u4E00\u81F4!"));else{if(!/^(?=.*[A-Za-z])(?=.*\d)(?=.*[`~!@#$%^&*()_+<>?:"{},.\/\\;'[\]])[A-Za-z\d`~!@#$%^&*()_+<>?:"{},.\/\\;'[\]]{8,}$/.test(e)){o(new Error("\u81F3\u5C118\u4F4D\u4E14\u5FC5\u6709\u6570\u5B57+\u7279\u6B8A\u5B57\u7B26+\u5B57\u6BCD"));return}o()}}}]}),n=f();function C(){const l=e=>{e.value.validate(o=>{o&&(n.value=!0,A(P.id,{password:m.value.password,oldPassword:m.value.oldPassword}).then(()=>{U({message:"\u4FDD\u5B58\u6210\u529F",type:"success"}),n.value=!1}).catch(i=>{n.value=!1}))})};return D(()=>{}),{passwordData:m,updateLoading:n,updatePassword:l,passwordDataRules:R}}const S={__name:"update-password",setup(l){const{passwordData:e,updateLoading:o,updatePassword:i,passwordDataRules:V}=C();let c=f();const x=()=>{i(c)};return(j,t)=>{const p=I,u=b,v=z,E=Z,y=L;return M(($(),q(E,{model:r(e),rules:r(V),ref_key:"updatePasswordForm",ref:c},{"form-title":s(()=>[w(" \u5BC6\u7801\u4FE1\u606F ")]),"form-sub-title":s(()=>[w(" \u6B64\u5904\u53EF\u4EE5\u4FEE\u6539\u60A8\u7684\u767B\u5F55\u8D26\u53F7\u5BC6\u7801\uFF0C\u8BF7\u59A5\u5584\u4FDD\u7BA1 ")]),footer:s(()=>[a(v,{type:"primary",size:"default",icon:r(B),onClick:x},{default:s(()=>[w("\u4FDD\u5B58\u8BBE\u7F6E")]),_:1},8,["icon"])]),default:s(()=>[a(u,{prop:"username",label:"\u7BA1\u7406\u5458\u8D26\u53F7"},{default:s(()=>[a(p,{id:"username",disabled:"","prefix-icon":r(F),modelValue:r(e).username,"onUpdate:modelValue":t[0]||(t[0]=d=>r(e).username=d),modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue"])]),_:1}),a(u,{prop:"oldPassword",label:"\u539F\u5BC6\u7801"},{default:s(()=>[a(p,{id:"oldPassword",type:"password","show-password":"","prefix-icon":r(_),modelValue:r(e).oldPassword,"onUpdate:modelValue":t[1]||(t[1]=d=>r(e).oldPassword=d),modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue"])]),_:1}),a(u,{prop:"password",label:"\u65B0\u5BC6\u7801"},{default:s(()=>[a(p,{id:"password",type:"password","show-password":"","prefix-icon":r(_),modelValue:r(e).password,"onUpdate:modelValue":t[2]||(t[2]=d=>r(e).password=d),modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue"])]),_:1}),a(u,{prop:"repassword",label:"\u91CD\u590D\u65B0\u5BC6\u7801"},{default:s(()=>[a(p,{id:"repassword",type:"password","show-password":"","prefix-icon":r(_),modelValue:r(e).repassword,"onUpdate:modelValue":t[3]||(t[3]=d=>r(e).repassword=d),modelModifiers:{trim:!0}},null,8,["prefix-icon","modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[y,r(o)]])}}};typeof g=="function"&&g(S);export{S as default};
