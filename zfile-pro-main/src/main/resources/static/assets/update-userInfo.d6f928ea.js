var w=(u,f,n)=>new Promise((_,r)=>{var i=e=>{try{a(n.next(e))}catch(s){r(s)}},c=e=>{try{a(n.throw(e))}catch(s){r(s)}},a=e=>e.done?_(e.value):Promise.resolve(e.value).then(i,c);a((n=n.apply(u,f)).next())});import{x as k}from"./base.9447ff7a.js";/* empty css               *//* empty css              */import"./common.d1611fb2.js";import{Z as v,a as S}from"./ZFormItem.85c758c5.js";import{u as F,l as q}from"./user.0f1e81c7.js";import{r as p,ac as z,aa as B,a as N,b as R,e as o,j as l,u as t,z as x,af as j,ag as C,y as E}from"./index.a81894c3.js";import{b}from"./route-block.89f12ae7.js";import{_ as D}from"./plugin-vue_export-helper.21dcd24c.js";import{r as J}from"./CheckBadgeIcon.5c38551d.js";import{E as Z}from"./request.88c6336a.js";import{E as M}from"./index.9dce3cd8.js";import"./index.b1a3ab43.js";import"./event.807e9a54.js";const O=u=>(j("data-v-e4d754d2"),u=u(),C(),u),T=O(()=>E("div",{class:"flex justify-items-center"},[E("span",null,"\u7528\u6237\u4FE1\u606F")],-1)),h={__name:"update-userInfo",setup(u){p(),z(),B();let f=p();const n=()=>w(this,null,function*(){f.value.validate((a,e)=>{if(a)i.value=!0,F(r.value).then(()=>{Z({message:"\u4FDD\u5B58\u6210\u529F",type:"success"})}).finally(()=>{i.value=!1});else return Z.warning("\u8868\u5355\u9A8C\u8BC1\u5931\u8D25, \u8BF7\u68C0\u67E5\u8868\u5355\u6570\u636E\u662F\u5426\u586B\u5199\u6B63\u786E"),!1})});let _=()=>{let a=p({id:null,username:"",usernameZh:"",password:"",enabled:!0,role:"\u666E\u901A\u7528\u6237",remark:""});const e=V=>{q(V).then(m=>{a.value=m.data})};let s=p(!1);const I=window.localStorage.getItem("zfile-user");let y=JSON.parse(I).id;y&&e(y);let U=p({username:[{required:!0,validator:(V,m,g)=>{if(m==null||m===""){g(new Error("\u8BF7\u8F93\u5165\u7528\u6237\u540D"));return}if(!/^[\w\-]+$/.test(m)){g(new Error("\u53EA\u5141\u8BB8\u4F7F\u7528\u5B57\u6BCD\u3001\u6570\u5B57\u3001\u4E0B\u5212\u7EBF\u3001\u6A2A\u6760"));return}g()}}],usernameZh:[{required:!0,message:"\u4E2D\u6587\u540D\u4E0D\u80FD\u4E3A\u7A7A"}]});return{userItem:a,loading:s,rules:U}},{userItem:r,loading:i,rules:c}=_();return(a,e)=>{const s=M,I=k;return N(),R(S,{model:t(r),class:"zfile-storage-edit",rules:t(c),ref_key:"userEditForm",ref:f},{"form-title":o(()=>[T]),footer:o(()=>[l(I,{loading:t(i),type:"primary",size:"default",icon:t(J),onClick:n},{default:o(()=>[x("\u4FDD\u5B58")]),_:1},8,["loading","icon"])]),default:o(()=>[l(v,{label:"\u7528\u6237\u540D",prop:"username"},{default:o(()=>[l(s,{disabled:"",modelValue:t(r).username,"onUpdate:modelValue":e[0]||(e[0]=d=>t(r).username=d)},null,8,["modelValue"])]),_:1}),l(v,{label:"\u7528\u6237\u4E2D\u6587\u540D",prop:"usernameZh"},{default:o(()=>[l(s,{modelValue:t(r).usernameZh,"onUpdate:modelValue":e[1]||(e[1]=d=>t(r).usernameZh=d)},null,8,["modelValue"])]),_:1}),l(v,{label:"\u5907\u6CE8"},{tips:o(()=>[x(" \u5907\u6CE8\u4FE1\u606F, \u7528\u4E8E\u8F85\u52A9\u8BF4\u660E ")]),default:o(()=>[l(s,{type:"textarea",rows:3,placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",modelValue:t(r).remark,"onUpdate:modelValue":e[2]||(e[2]=d=>t(r).remark=d)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])}}};typeof b=="function"&&b(h);var oe=D(h,[["__scopeId","data-v-e4d754d2"]]);export{oe as default};
