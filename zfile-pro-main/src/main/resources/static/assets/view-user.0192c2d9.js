import{E as F}from"./base.9447ff7a.js";/* empty css                */import{E as G}from"./card.da6ac894.js";/* empty css               */import{E as H,a as J,b as Q}from"./dropdown-item.859a734d.js";import"./popper.34e4046d.js";import"./scrollbar.b58c5e8b.js";/* empty css             */import{E as W}from"./tag.be7f307a.js";import{_ as X}from"./SvgIcon.bb4e9d6f.js";/* empty css              */import{r as f,c as Y,ac as ee,o as te,a as d,f as U,D as B,u as s,b as R,e as n,y as t,j as a,ae as oe,bi as se,O as ae,P as ne,A as j,z as l,E as O,bj as V,bk as re,bl as le,b9 as ie,a3 as ce,bn as de,bg as ue,af as me,ag as pe}from"./index.a81894c3.js";import{_ as _e}from"./avator.46fdf30e.js";import{d as fe,u as xe,l as he,r as ve}from"./admin-user.9036c1c8.js";import"./sortable.esm.d7ef5fdd.js";import{u as be}from"./useCommon.373cb8ed.js";import{E as k}from"./index.9f034646.js";import{E as D}from"./request.88c6336a.js";import{b as $}from"./route-block.89f12ae7.js";import{_ as ge}from"./plugin-vue_export-helper.21dcd24c.js";import{E as we}from"./index.9dce3cd8.js";import{v as ye}from"./directive.8a34351b.js";import"./dropdown.5de453d7.js";import"./castArray.7c80ce00.js";import"./refs.7263a917.js";import"./focus-trap.c21bbfc6.js";import"./index.9b197a07.js";import"./index.1d04ede7.js";import"./scroll.c1d55f52.js";import"./validator.4f1297a1.js";import"./event.807e9a54.js";be();f(!1);f();let T=f(!1),I=f([]),_=f("");function ke(i){const C=()=>{i.push("/admin/user-edit")},x=e=>{i.push("/admin/user-edit/"+e.id)},h=e=>{k.confirm("\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning",callback:r=>{r==="confirm"&&fe(e.id).then(g=>{D.success("\u5220\u9664\u6210\u529F"),c()})}})},m=e=>{k.confirm("\u662F\u5426\u786E\u8BA4\u5173\u95ED\uFF1F\u5173\u95ED\u540E\u586B\u5199\u7684\u6570\u636E\u4E0D\u4F1A\u4FDD\u7559\u3002",{type:"warning"}).then(r=>{e()}).catch(r=>{})},v=e=>{k.confirm(`\u662F\u5426\u786E\u8BA4${e.enabled?"\u7981\u7528":"\u542F\u7528"}\u7528\u6237\u3002`,"\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning",callback:r=>{if(r==="confirm"){let g=e.enabled?"disable":"enable";xe(e.id,g).then(()=>{D.success((e.enabled?"\u7981\u7528":"\u542F\u7528")+"\u6210\u529F"),e.enabled=!e.enabled})}}})},E=e=>{k.confirm("\u662F\u5426\u786E\u8BA4\u91CD\u7F6E"+e.username+"\u7684\u5BC6\u7801\uFF1F","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning",callback:r=>{r==="confirm"&&ve(e.id).then(g=>{D.success("\u91CD\u7F6E\u6210\u529F"),c()})}})},b=e=>{switch(e.operator){case"edit":x(e.user);break;case"enable":v(e.user);break;case"pwdManager":E(e.user);break;case"delete":h(e.user);break}},c=()=>{T.value=!0,he().then(e=>{I.value=e.data,T.value=!1})},L=Y(()=>_.value===""?I.value:I.value.filter(e=>!!(e.username&&e.username.toLowerCase().indexOf(_.value.toLowerCase())!==-1||e.remark&&e.remark.toLowerCase().indexOf(_.value.toLowerCase())!==-1||e.usernameZh&&e.usernameZh.toLowerCase().indexOf(_.value.toLowerCase())!==-1)));return{init:c,loading:T,searchKey:_,userListSearchResult:L,handleOperator:b,addUser:C,editUser:x,deleteUser:h,handleClose:m,userSwitchEnableStatus:v}}const u=i=>(me("data-v-69806c42"),i=i(),pe(),i),Ce=u(()=>t("div",{class:"flex justify-between"},[t("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," \u7528\u6237\u4FE1\u606F ")],-1)),Ee={class:"my-2 text-sm text-gray-500 flex justify-between flex-wrap"},Le=u(()=>t("div",null," \u6B64\u9875\u9762\u663E\u793A\u7528\u6237\u76F8\u5173\u7684\u4FE1\u606F ",-1)),Se={role:"list",class:"user-container grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-6"},Ue=["onDblclick"],Be={class:"flex-1 flex flex-col p-4 pb-4 relative"},Re=u(()=>t("div",{class:"rounded-full bg-blue-50 w-fit mx-auto"},[t("img",{class:"w-16 h-16 flex-shrink-0 mx-auto p-1",src:_e})],-1)),je={class:"mt-1 text-gray-900 text-sm font-medium"},De={class:"mt-1 flex-grow flex flex-col justify-between"},Te={class:"text-gray-500 text-sm line-clamp-1"},Ie={class:"mt-1 space-x-1"},Me={class:"-mt-px border-t flex divide-x divide-gray-200"},Oe=["onClick"],Ve={class:"hover:text-blue-500 relative -mr-px w-0 flex-1 inline-flex items-center justify-center py-2 text-sm text-gray-700 font-medium border border-transparent rounded-bl-lg hover:text-gray-500 ml-3"},$e={class:"w-0 flex-1 flex cursor-pointer"},qe={class:"hover:text-blue-500 relative -mr-px w-0 flex-1 inline-flex items-center justify-center py-2 text-sm text-gray-700 font-medium border border-transparent rounded-bl-lg hover:text-gray-500 ml-3"},Pe={class:"text-sm font-medium"},Ne=u(()=>t("span",null,"\u66F4\u591A",-1)),Ze=u(()=>t("div",{class:"divider"},null,-1)),Ke=u(()=>t("div",{class:"divider"},null,-1)),ze={class:"flex-1 flex flex-col p-8 mx-auto justify-center"},q={__name:"view-user",setup(i){let C=ee();const{init:x,loading:h,searchKey:m,userListSearchResult:v,handleOperator:E,addUser:b,editUser:c,deleteUser:L,handleClose:e,userSwitchEnableStatus:r}=ke(C);return te(()=>{x()}),(g,w)=>{const P=we,N=X,S=W,M=F,p=H,Z=J,K=Q,z=G,A=ye;return d(),U("div",null,[B((d(),R(z,null,{default:n(()=>[t("div",null,[Ce,t("div",Ee,[Le,t("div",null,[a(P,{placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5185\u5BB9",modelValue:s(m),"onUpdate:modelValue":w[0]||(w[0]=o=>oe(m)?m.value=o:null),"prefix-icon":s(se)},null,8,["modelValue","prefix-icon"])])])]),t("ul",Se,[(d(!0),U(ae,null,ne(s(v),o=>(d(),U("li",{key:o.id,onDblclick:y=>s(c)(o),class:"user-item group col-span-1 flex flex-col text-center bg-white rounded-lg border hover:shadow"},[t("div",Be,[a(N,{onClick:y=>s(L)(o),name:"delete",class:"absolute right-3 top-3 cursor-pointer group-hover:text-red-500"},null,8,["onClick"]),Re,t("h3",je,j(o.username),1),t("dl",De,[t("dd",Te,j(o.usernameZh),1),t("dd",Ie,[a(S,{type:o.role=="\u7CFB\u7EDF\u7BA1\u7406\u5458"?"warning":""},{default:n(()=>[l(j(o.role),1)]),_:2},1032,["type"]),B(a(S,{type:"success",onClick:y=>s(r)(o)},{default:n(()=>[l("\u542F\u7528")]),_:2},1032,["onClick"]),[[O,o.enabled]]),B(a(S,{type:"danger",onClick:y=>s(r)(o)},{default:n(()=>[l("\u505C\u7528")]),_:2},1032,["onClick"]),[[O,!o.enabled]])])])]),t("div",Me,[t("div",{onClick:y=>s(c)(o),class:"w-0 flex-1 flex cursor-pointer"},[t("span",Ve,[a(M,{class:"mr-2"},{default:n(()=>[a(s(V))]),_:1}),l(" \u7F16\u8F91 ")])],8,Oe),a(K,{onCommand:s(E),class:"cursor-pointer flex-1"},{dropdown:n(()=>[a(Z,null,{default:n(()=>[a(p,{icon:s(V),command:{operator:"edit",user:o}},{default:n(()=>[l("\u7F16\u8F91")]),_:2},1032,["icon","command"]),o.enabled?(d(),R(p,{key:1,icon:s(le),command:{operator:"enable",user:o}},{default:n(()=>[l("\u505C\u7528")]),_:2},1032,["icon","command"])):(d(),R(p,{key:0,icon:s(re),command:{operator:"enable",user:o}},{default:n(()=>[l("\u542F\u7528")]),_:2},1032,["icon","command"])),Ze,a(p,{icon:s(ie),command:{operator:"pwdManager",user:o}},{default:n(()=>[l("\u91CD\u7F6E\u5BC6\u7801")]),_:2},1032,["icon","command"]),Ke,a(p,{icon:s(ce),command:{operator:"delete",user:o}},{default:n(()=>[l("\u5220\u9664")]),_:2},1032,["icon","command"])]),_:2},1024)]),default:n(()=>[t("div",$e,[t("span",qe,[t("span",Pe,[a(M,{class:"mr-2"},{default:n(()=>[a(s(de))]),_:1}),Ne])])])]),_:2},1032,["onCommand"])])],40,Ue))),128)),t("li",{onClick:w[1]||(w[1]=(...o)=>s(b)&&s(b)(...o)),class:"add-storage-btn cursor-pointer col-span-1 flex flex-col text-center bg-white rounded-lg border hover:shadow"},[t("div",ze,[a(s(ue),{class:"h-20 text-gray-300"})])])])]),_:1})),[[A,s(h)]])])}}};typeof $=="function"&&$(q);var yt=ge(q,[["__scopeId","data-v-69806c42"]]);export{yt as default};
